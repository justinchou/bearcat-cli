!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).bearcat=t()}}(function(){var define,module,exports;return function t(e,n,r){function o(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var p=n[s]={exports:{}};e[s][0].call(p.exports,function(t){var n=e[s][1][t];return o(n||t)},p,p.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){t("./lib/util/requireUtil"),e.exports=t("./lib/bearcat")},{"./lib/bearcat":19,"./lib/util/requireUtil":41}],2:[function(t,e,n){var r=t("./pointcut"),o=function(){this.pointcut=null,this.beanName=null,this.runtime=null,this.advice=null,this.order=null,this.bean=null};o.prototype.setPointcut=function(t){if(t){var e=new r;e.setExpression(t),this.pointcut=e}},o.prototype.getPointcut=function(){return this.pointcut},o.prototype.setAdvice=function(t){this.advice=t},o.prototype.getAdvice=function(){return this.advice},o.prototype.setBeanName=function(t){this.beanName=t},o.prototype.getBeanName=function(){return this.beanName},o.prototype.setBean=function(t){this.bean=t},o.prototype.getBean=function(){return this.bean},o.prototype.setOrder=function(t){this.order=t},o.prototype.getOrder=function(){return this.order},o.prototype.setRuntime=function(t){this.runtime=t},o.prototype.isRuntime=function(){return this.runtime},o.prototype.parse=function(){this.pointcut.parse()},e.exports=o},{"./pointcut":9}],3:[function(t,e,n){var r=function(){this.advisors=[],this.beanName=null,this.beanDefinition=null,this.bean=null};r.prototype.addAdvisor=function(t){this.advisors.push(t)},r.prototype.getAdvisors=function(){return this.advisors},r.prototype.setBeanDefinition=function(t){this.beanDefinition=t},r.prototype.getBeanDefinition=function(){return this.beanDefinition},r.prototype.setBeanName=function(t){this.beanName=t},r.prototype.getBeanName=function(){return this.beanName},r.prototype.setBean=function(t){this.bean=t},r.prototype.getBean=function(){return this.bean},e.exports=r},{}],4:[function(t,e,n){var r=t("../framework/proxyFactory"),o=t("../targetSource"),i=t("../../util/aopUtil"),s=t("../../util/utils"),a=function(){this.beanFactory=null};a.prototype.before=function(t,e){return t},a.prototype.after=function(t,e){return this.wrapIfNecessary(t,e)},a.prototype.setBeanFactory=function(t){this.beanFactory=t},a.prototype.getBeanFactory=function(){return this.beanFactory},a.prototype.wrapIfNecessary=function(t,e){var n=this.beanFactory.getBeanDefinition(e);if(!n.needProxy())return t;if(n.isAspect())return t;var r=this.getAdvisorsForBean(t,e);return s.checkArray(r)&&r.length?this.createProxy(t,e,r,new o(e,t)):t},a.prototype.createProxy=function(t,e,n,o){var s=new r;s.setBeanFactory(this.getBeanFactory()),s.setTarget(o);var a=i.getMethodsFromObject(t);s.setInterfaces(a);for(var c=0;c<n.length;c++)s.addAdvisor(n[c]);return s.getProxy()},a.prototype.getAdvisorsForBean=function(t,e){return this.findEligibleAdvisors(t,e)},a.prototype.findEligibleAdvisors=function(t,e){var n=this.findCandidateAdvisors(t,e);return this.findAdvisorsThatCanApply(t,e,n)},a.prototype.findCandidateAdvisors=function(t,e){for(var n=this.beanFactory.getAspects(),r=[],o=0;o<n.length;o++){var i=n[o],s=(e=i.getBeanName(),this.beanFactory.getBean(e));i.setBean(s);for(var a=i.getAdvisors(),c=0;c<a.length;c++){var u=a[c];u.setBean(s),r.push(u)}}return r},a.prototype.findAdvisorsThatCanApply=function(t,e,n){for(var r=[],o=0;o<n.length;o++){var s=n[o];this.canApply(s,t,e)&&r.push(s)}return r=i.sortAdvisorsByOrder(r)},a.prototype.canApply=function(t,e,n){for(var r=i.getMethodsFromObject(e),o=t.getPointcut(),s=0;s<r.length;s++){var a=n+"."+r[s];if(o.match(a))return!0}return!1},e.exports=a},{"../../util/aopUtil":34,"../../util/utils":43,"../framework/proxyFactory":8,"../targetSource":10}],5:[function(t,e,n){var r=t("../../util/utils"),o=function(){this.advisors=[],this.interfaces=[],this.methodCache={},this.beanFactory=null,this.targetSource=null,this.advisorChainFactory=null};o.prototype.setTarget=function(t){this.setTargetSource(t)},o.prototype.setTargetSource=function(t){this.targetSource=t},o.prototype.getTargetSource=function(){return this.targetSource},o.prototype.setInterfaces=function(t){for(var e=0;e<t.length;e++)this.addInterface(t[e])},o.prototype.addInterface=function(t){this.interfaces.push(t)},o.prototype.getInterfaces=function(){return this.interfaces},o.prototype.getAdvisors=function(){return this.advisors},o.prototype.addAdvisor=function(t){this.advisors.push(t)},o.prototype.getBeanFactory=function(){return this.beanFactory},o.prototype.setBeanFactory=function(t){this.beanFactory=t},o.prototype.getInterceptionAdvice=function(t,e,n){var r=t+"_"+n,o=this.methodCache[r];return o||(o=this.doGetInterceptionAdvice(t,e,n),this.methodCache[r]=o),o},o.prototype.doGetInterceptionAdvice=function(t,e,n){for(var o=[],i=this.getAdvisors(),s=e+"."+t,a=0;a<i.length;a++){var c=i[a],u=c.getPointcut();u.getAdviceType()===n&&(u.match(s)&&o.push(c))}return o.sort(r.compareByOrder),o},e.exports=o},{"../../util/utils":43}],6:[function(t,e,n){var r=t("pomelo-logger").getLogger("bearcat","DynamicAopProxy"),o=t("../../util/constant"),i=t("../../util/utils"),s=function(t){this.advised=t,this.dyInit()};s.prototype.dyInit=function(){if(this.advised)for(var t=this.advised.getInterfaces(),e=this,n=0;n<t.length;n++)!function(t){c(t)?r.error("init error proxy method interface %j the same as DynamicAopProxy, rename this name to another.",t):e[t]=function(){return arguments=Array.prototype.slice.apply(arguments),e.dyInvoke(t,arguments)}}(t[n]);else r.error("DynamicAopProxy init error no advised")},s.prototype.dyInvoke=function(t,e){var n=this,r=e.pop(),s=!1;i.checkFunction(r)||(e.push(r),r=function(){},s=!0);var a=this.advised.getTargetSource(),c=a.getBeanName(),u=a.getTarget(),p=o.AOP_ADVICE_BEFORE,l=this.advised.getInterceptionAdvice(t,c,p);p=o.AOP_ADVICE_AROUND;var f=this.advised.getInterceptionAdvice(t,c,p),h=!1;i.checkArray(f)&&f.length&&(h=!0),p=o.AOP_ADVICE_AFTER;var y=this.advised.getInterceptionAdvice(t,c,p),g=!1;return i.checkArray(y)&&y.length&&(g=!0),this.doInvokeAdvisorsBefore(t,e,l,function(o){if(o)return r(o);if(!h){if(s){var i=u[t].apply(u,e);return g&&n.doInvokeAdvisorsAfter(t,i,y,function(){}),i}return e.push(function(){arguments=Array.prototype.slice.apply(arguments),r.apply(null,arguments),n.doInvokeAdvisorsAfter(t,arguments,y,function(){})}),u[t].apply(u,e)}n.doInvokeAdvisorsAround(u,t,e,f,function(){arguments=Array.prototype.slice.apply(arguments),r.apply(null,arguments),n.doInvokeAdvisorsAfter(t,arguments,y,function(){})})})},s.prototype.doInvokeAdvisorsBefore=function(t,e,n,r){var o=0;if(e=Array.prototype.slice.apply(e),!n||!i.checkArray(n)||!n.length)return r();var s=function(t){if(t||o>=n.length)return r(t);var i=n[o++],a=i.getAdvice(),c=i.getBean(),u=function(t){s(t)};i.isRuntime()?(e.push(u),c[a].apply(c,e)):c[a](u)};s()},s.prototype.doInvokeAdvisorsAround=function(t,e,n,r,o){var i=r[0],s=i.getAdvice(),a=i.getBean();i.isRuntime()?(n.unshift(e),n.unshift(t),n.push(o),a[s].apply(a,n)):a[s](t,e,o)},s.prototype.doInvokeAdvisorsAfter=function(t,e,n,r){var o=0;if(!n||!i.checkArray(n)||!n.length)return r();i.checkArray(e)||(e=[e]);var s=function(t){if(t||o>=n.length)return r(t);var i=n[o++],a=i.getAdvice(),c=i.getBean();e.push(function(t){s(t)}),c[a].apply(c,e)};s()};var a=["dyInit","dyInvoke","doInvokeAdvisorsBefore","doInvokeAdvisorsAround","doInvokeAdvisorsAfter"],c=function(t){for(var e=0;e<a.length;e++)if(t===a[e])return!0;return!1};e.exports=s},{"../../util/constant":36,"../../util/utils":43,"pomelo-logger":56}],7:[function(t,e,n){var r=t("pomelo-logger").getLogger("bearcat","DynamicMetaProxy"),o=t("../../util/utils"),i=function(){this.args=null,this.target=null,this.beanFactory=null,this.beanDefinition=null};i.prototype.dyInit=function(){var t=this.getBeanDefinition();if(t){var e=this,n=t.getFunc();if(o.checkFunction(n)){var i=n.prototype;for(interface in i)o.checkFunction(i[interface])&&function(t){a(t)?r.error("init error proxy method interface %j the same as DynamicMetaProxy, rename this name to another.",t):e[t]=function(){return e.dyInvoke(t,arguments)}}(interface)}}else r.error("init error no beanDefinition.")},i.prototype.dyInvoke=function(t,e){var n=this.getBean();if(o.checkFunction(n[t]))return n[t].apply(n,e);r.error("invoke error no such method %s in the target bean",t)},i.prototype.getBean=function(){var t=this.getArgs(),e=this.getBeanFactory();return this.getTarget()||this.setTarget(e.getBean.apply(e,t)),this.target},i.prototype.setArgs=function(t){this.args=t},i.prototype.getArgs=function(){return this.args},i.prototype.setTarget=function(t){this.target=t},i.prototype.getTarget=function(){return this.target},i.prototype.setBeanFactory=function(t){this.beanFactory=t},i.prototype.getBeanFactory=function(){return this.beanFactory},i.prototype.setBeanDefinition=function(t){this.beanDefinition=t},i.prototype.getBeanDefinition=function(){return this.beanDefinition};var s=["dyInit","dyInvoke","getBean","setBeanName","getBeanName","setMeta","getMeta","setTarget","setBeanFactory","getBeanFactory"],a=function(t){for(var e=0;e<s.length;e++)if(t===s[e])return!0;return!1};e.exports=i},{"../../util/utils":43,"pomelo-logger":56}],8:[function(t,e,n){var r=t("../../util/requireUtil"),o=t("./dynamicAopProxy"),i=t("./advisedSupport"),s=t("../../util/utils"),a=function(t,e){this.beanFactory=null,i.call(this),t&&this.setTarget(t),s.checkArray(e)&&this.setInterfaces(e)};r.requireUtil().inherits(a,i),a.prototype.getProxy=function(){this.getBeanFactory();return new o(this)},e.exports=a},{"../../util/requireUtil":41,"../../util/utils":43,"./advisedSupport":5,"./dynamicAopProxy":6}],9:[function(t,e,n){var r=t("../util/utils"),o=function(){this.expression=null,this.adviceType=null,this.targetExpression=null};o.prototype.setExpression=function(t){this.expression=t},o.prototype.getExpression=function(){return this.expression},o.prototype.setAdviceType=function(t){this.adviceType=t},o.prototype.getAdviceType=function(){return this.adviceType},o.prototype.setTargetExpression=function(t){this.targetExpression=new RegExp(t)},o.prototype.getTargetExpression=function(){return this.targetExpression},o.prototype.parse=function(){var t=this.getExpression();if(t){var e=t.split(":");r.checkArray(e)&&2===e.length&&(this.setAdviceType(e[0]),this.setTargetExpression(e[1]))}},o.prototype.match=function(t){var e=this.getTargetExpression();return t.match(e)},e.exports=o},{"../util/utils":43}],10:[function(t,e,n){var r=function(t,e){this.beanName=t,this.target=e};r.prototype.setBeanName=function(t){this.beanName=t},r.prototype.getBeanName=function(){return this.beanName},r.prototype.setTarget=function(t){this.target=t},r.prototype.getTarget=function(){return this.target},r.prototype.releaseTarget=function(){},e.exports=r},{}],11:[function(t,e,n){var r=t("pomelo-logger").getLogger("bearcat","BeanFactory"),o=t("../aop/framework/dynamicMetaProxy"),i=t("./singletonBeanFactory"),s=t("../model/modelConstraint"),a=t("../model/modelDefinition"),c=t("./support/beanDefinition"),u=t("../util/validatorUtil"),p=t("../model/modelFilter"),l=t("../model/modelProxy"),f=t("../util/modelUtil"),h=t("../util/constant"),y=t("../util/beanUtil"),g=t("../util/aopUtil"),d=(t("../aop/aspect"),t("../util/utils")),v=function(){this.aspects=[],this.modelMap={},this.initCbMap={},this.beanCurMap={},this.constraints={},this.tableModelMap={},this.beanFunctions={},this.beanDefinitions={},this.beanPostProcessors=[],this.singletonBeanFactory=new i(this)};v.prototype.getBean=function(t){if(!this.beanCurMap[t]){this.beanCurMap[t]=!0;var e=this.doGetBean.apply(this,arguments);return delete this.beanCurMap[t],e}r.error("circle reference beanName "+t+" is in creating")},v.prototype.getBeanProxy=function(t){return this.doGetBeanProxy.apply(this,arguments)},v.prototype.getModelProxy=function(t){return this.doGetModelProxy(t)},v.prototype.getConstraint=function(t){return this.doGetConstraint(t)},v.prototype.doGetBean=function(t){var e=this.getBeanDefinition(t);return e?e.isAbstract()?(r.warn("abstract bean can not get bean instance, you can use bearcat.getFunction to get constructor function of the bean"),this.getBeanFunction(t)):(e.hasParentBean()&&(e=this.setParentBean(t)),e.isSingleton()?this.singletonBeanFactory.getSingleton.apply(this.singletonBeanFactory,arguments):e.isPrototype()?this.createBean.apply(this,arguments):void 0):(r.error("BeanFactory beanDefinition null for %j",t),null)},v.prototype.doGetBeanProxy=function(t){var e=this.getBeanDefinition(t);if(!e)return r.error("BeanFactory beanDefinition null for %j",t),null;var n=new o;return n.setBeanDefinition(e),n.setBeanFactory(this),n.setArgs(arguments),n.dyInit(),n},v.prototype.doGetModelProxy=function(t){var e=this.getModelDefinition(t);if(!e)return r.error("BeanFactory modelDefinition null for %j",t),null;var n=e.getId(),o=this.getBeanDefinition(n);if(!o)return r.error("BeanFactory beanDefinition null for %j",t),null;var i=new p;i.setModelDefinition(e);var s=new l,a=this.getBean(n),c=e.getFields();for(var u in c){var f=c[u],y=f.getDefault(),g=f.getType();d.isNotNull(y)&&(g===h.TYPE_NUMBER&&(y=parseInt(y)),a[u]=y)}return i.setModel(a),s.model=a,s.beanFactory=this,s.modelFilter=i,s.beanDefinition=o,s.modelDefinition=e,s._modelInit(),s},v.prototype.doGetConstraint=function(t){var e=this.getConstraintDefinition(t);if(!e)return r.error("BeanFactory constraintDefinition null for %j",t),null;var n=e.getId();return this.getBean(n)},v.prototype.createBean=function(t){var e=this.doCreateBean.apply(this,arguments);return e=this.initBean(e,t,this.getInitCb(t))},v.prototype.doCreateBean=function(t){var e=this.getBeanDefinition(t);if(!e)return null;if(e.hasFactoryBean())return this.getBeanFromFactoryBean.apply(this,arguments);var n=e.getArgsOn(),r=e.getPropsOn(),o=this.getBeanFunction(t);if(!o)return null;var i=this.getDependsBeanValues(n,arguments),s=this.getDependsApplyArgs(i),a=Object.create(o.prototype);if(o.apply(a,s),i=this.getDependsBeanValues(r),d.checkArray(i))for(var c=0;c<i.length;c++){var u=i[c],p=u.getName();u.getDependType()===h.DEPEND_TYPE_BEAN?a[p]=u.getBean():u.getDependType()===h.DEPEND_TYPE_VALUE&&(a[p]=u.getValue())}return a},v.prototype.initBean=function(t,e,n){if(this.getBeanDefinition(e))return t=this.applyBeanPostProcessorsBeforeInitialization(t,e),this.invokeInitMethods(t,e,n),t=this.applyBeanPostProcessorsAfterInitialization(t,e)},v.prototype.invokeInitMethods=function(t,e,n){var r=this.getBeanDefinition(e);if(r&&r.hasInitMethod()){var o=t[r.getInitMethodName()];d.checkFunction(o)&&o.call(t,n)}},v.prototype.getBeanFromFactoryBean=function(t){var e=this.getBeanDefinition(t),n=e.getFactoryBeanName(),r=e.getFactoryMethodName(),o=e.getFactoryArgsOn(),i=this.getBean(n);if(!i)return null;var s=i[r],a=this.getDependsBeanValues(o,arguments),c=this.getDependsApplyArgs(a);return s.apply(i,c)},v.prototype.getDependsBeanValues=function(t,e){var n=[];if(!d.checkArray(t))return n;for(var r=1,o=0;o<t.length;o++){var i=t[o],s=i.getRef();if(i.getDependType()===h.DEPEND_TYPE_BEAN){var a=this.getBean(s);a&&i.setBean(a)}if(i.getDependType()===h.DEPEND_TYPE_VAR){var c=e[r++];i.setValue(c)}n.push(i)}return n},v.prototype.getDependsApplyArgs=function(t){var e=[];if(!d.checkArray(t))return e;for(var n=0;n<t.length;n++){var o=t[n];o.getDependType()===h.DEPEND_TYPE_BEAN?e.push(o.getBean()):o.getDependType()===h.DEPEND_TYPE_VALUE?e.push(o.getValue()):o.getDependType()===h.DEPEND_TYPE_VAR?e.push(o.getValueOnce()):r.error("getDependsApplyArgs depends args type error %j",o)}return e},v.prototype.setParentBean=function(t){var e=this.getBeanDefinition(t);if(!e)return null;var n=e.getParentName(),r=this.getBeanDefinition(n),o=this.getBeanFunction(t),i=this.getBeanFunction(n);if(i){var s=i.prototype;for(var a in s)o.prototype[a]||(o.prototype[a]=s[a])}return r&&(e.setParentBean(r),e.setArgsOn(r.getArgs()),e.setPropsOn(r.getProps()),e.setFactoryArgsOn(r.getFactoryArgs())),e},v.prototype.registerBeans=function(t){for(var e in t)this.registerBean(e,t[e])},v.prototype.registerBean=function(t,e){var n=e.func,o=u.metaValidator(e);if(!0===o){var i=e.mid;i&&this.registerModel(t,i,e);var s=e.cid;s&&this.registerConstraint(t,s,e),n&&d.checkFunction(n)&&!this.getBeanFunction(t)&&this.setBeanFunction(t,n);var a=e.order,p=e.parent,l=e.init,f=e.destroy,v=e.factoryBean,m=e.factoryMethod,b=e.scope||h.SCOPE_DEFAULT,A=e.args||h.ARGS_DEFAULT,E=e.props||h.PROPS_DEFAULT,B=e.factoryArgs||h.ARGS_DEFAULT,_=e.async||h.ASYNC_INIT_DEFAULT,F=e.lazy||h.LAZY_INIT_DEFAULT,N=e.abstract||h.ABSTRACT_DEFAULT,T=e.proxy;d.isNotNull(T)||(T=h.PROXY_DEFAULT);var P=e.aop,O=null;if((O=this.getBeanDefinition(t))||(O=new c),i&&(b=h.SCOPE_PROTOTYPE),O.setFunc(n),O.setOrder(a),O.setScope(b),O.setProxy(T),O.setBeanName(t),O.setLazyInit(F),O.setAbstract(N),O.setAsyncInit(_),O.setParentName(p),O.setInitMethodName(l),O.setFactoryBeanName(v),O.setFactoryMethodName(m),O.setDestroyMethodName(f),O.setArgsOn(y.buildBeanWrapper(A)),O.setPropsOn(y.buildBeanWrapper(E)),O.setFactoryArgsOn(y.buildBeanWrapper(B)),P&&d.checkArray(P)){var D=g.buildAspect(P,O);this.aspects.push(D),O.setAspect(!0)}this.beanDefinitions[t]=O}else r.error("registryBean %j metaObject %j validate error %s",t,e,o.stack)},v.prototype.registerModel=function(t,e,n){var r=null;(r=this.getModelDefinition(e))||(r=new a);var o=n.table,i=n.prefix,s=n.attributes,c=f.buildModelAttribute(s,this);r.setId(t),r.setMid(e),r.setTable(o),r.setPrefix(i),r.setFields(c.fields),r.setBalance(c.balance),r.setRefFields(c.refFields),r.setOneToMany(c.oneToMany),d.isNotNull(o)&&this.setTableModelMap(o,r),this.modelMap[e]=r},v.prototype.registerConstraint=function(t,e,n){var r=null;(r=this.getConstraintDefinition(e))||(r=new s);n.message;var o=n.constraint;r.setId(t),r.setCid(e),r.setConstraint(o),this.constraints[e]=r},v.prototype.preInstantiateSingletons=function(t){var e=y.sortBeanDefinitions(this.beanDefinitions,this),n=this,r=0,o=function(i){if(i||r>=e.length)return t(i);var s=e[r++],a=s.getBeanName();if(s.isAsyncInit())if(n.singletonBeanFactory.containsSingleton(a))n.getBean(a),o();else{var c=function(){o()};n.setInitCb(a,c),n.getBean(a)}else{c=function(){};n.setInitCb(a,c),n.getBean(a),o()}};o()},v.prototype.addBeanPostProcessor=function(t){this.beanPostProcessors.push(t)},v.prototype.getBeanPostProcessors=function(){return this.beanPostProcessors},v.prototype.applyBeanPostProcessorsBeforeInitialization=function(t,e){for(var n=t,r=this.getBeanPostProcessors(),o=0;o<r.length;o++){if(!(n=r[o].before(n,e)))return n}return n},v.prototype.applyBeanPostProcessorsAfterInitialization=function(t,e){for(var n=t,r=this.getBeanPostProcessors(),o=0;o<r.length;o++){if(!(n=r[o].after(n,e)))return n}return n},v.prototype.destroySingletons=function(){for(var t=this.singletonBeanFactory.getSingletonNames(),e=0;e<t.length;e++)this.destroySingleton(t[e])},v.prototype.destroyBeanFactory=function(){this.initCbMap=null,this.beanCurMap=null,this.beanFunctions=null,this.beanDefinitions=null,this.singletonBeanFactory=null},v.prototype.destroySingleton=function(t){if(this.getBeanDefinition(t)){var e=this.getBean(t);this.destroyBean(t,e),this.singletonBeanFactory.removeSingleton(t)}},v.prototype.destroyBean=function(t,e){var n=this.getBeanDefinition(t);if(n){var r=e[n.getDestroyMethodName()];d.checkFunction(r)&&r.call(e),this.removeFunction(t),this.removeBeanDefinition(t)}},v.prototype.isSingleton=function(t){var e=this.getBeanDefinition(t);return!!e&&e.isSingleton()},v.prototype.isPrototype=function(t){var e=this.getBeanDefinition(t);return!!e&&e.isPrototype()},v.prototype.containsBean=function(t){return!!this.getBeanFunction(t)&&!!this.getBeanDefinition(t)},v.prototype.getBeanFunction=function(t){return this.beanFunctions[t]},v.prototype.setBeanFunction=function(t,e){this.beanFunctions[t]=e},v.prototype.removeFunction=function(t){delete this.beanFunctions[t]},v.prototype.getInitCb=function(t){return this.initCbMap[t]||(this.initCbMap[t]=h.INIT_CB_DEFAULT),this.initCbMap[t]},v.prototype.setInitCb=function(t,e){this.initCbMap[t]=e},v.prototype.getBeanDefinition=function(t){return this.beanDefinitions[t]},v.prototype.getBeanDefinitions=function(){return this.beanDefinitions},v.prototype.removeBeanDefinition=function(t){delete this.beanDefinitions[t]},v.prototype.containsBeanDefinition=function(t){return!!this.getBeanDefinition(t)},v.prototype.getAspects=function(){return this.aspects},v.prototype.getModelDefinition=function(t){return this.modelMap[t]},v.prototype.getModelDefinitions=function(){return this.modelMap},v.prototype.getConstraintDefinition=function(t){return this.constraints[t]},v.prototype.setTableModelMap=function(t,e){this.tableModelMap[t]=e},v.prototype.getModelDefinitionByTable=function(t){return this.tableModelMap[t]},e.exports=v},{"../aop/aspect":3,"../aop/framework/dynamicMetaProxy":7,"../model/modelConstraint":23,"../model/modelDefinition":24,"../model/modelFilter":25,"../model/modelProxy":27,"../util/aopUtil":34,"../util/beanUtil":35,"../util/constant":36,"../util/modelUtil":39,"../util/utils":43,"../util/validatorUtil":44,"./singletonBeanFactory":12,"./support/beanDefinition":13,"pomelo-logger":56}],12:[function(t,e,n){t("pomelo-logger").getLogger("bearcat","SingletonBeanFactory");var r=function(t){this.beanFactory=t,this.singletonObjects={}};r.prototype.addSingleton=function(t,e){this.singletonObjects[t]=e},r.prototype.containsSingleton=function(t){return!!this.singletonObjects[t]},r.prototype.getSingleton=function(t){var e=this.beanFactory,n=this.singletonObjects[t];return n||(n=e.createBean.apply(e,arguments),this.addSingleton(t,n),n)},r.prototype.getSingletonNames=function(){var t=[];for(var e in this.singletonObjects)t.push(e);return t},r.prototype.removeSingleton=function(t){delete this.singletonObjects[t]},e.exports=r},{"pomelo-logger":56}],13:[function(t,e,n){var r=t("../../util/constant"),o=t("../../util/beanUtil"),i=t("../../util/utils"),s=function(){this.argsOn=[],this.propsOn=[],this.func=null,this.order=null,this.proxy=!0,this.aspect=!1,this.abstract=!1,this.lazyInit=!1,this.asyncInit=!1,this.parentName=null,this.parentBean=null,this.beanName=null,this.factoryArgsOn={},this.factoryBeanName=null,this.factoryMethodName=null,this.initMethodName=null,this.destroyMethodName=null,this.scope=r.SCOPE_DEFAULT};s.prototype.getParentName=function(){return this.parentName},s.prototype.setParentName=function(t){t&&(this.parentName=t)},s.prototype.hasParentBean=function(){return this.getParentName()&&!this.getParentBean()},s.prototype.getParentBean=function(){return this.parentBean},s.prototype.setParentBean=function(t){t&&(this.parentBean=t)},s.prototype.getBeanName=function(){return this.beanName},s.prototype.setBeanName=function(t){if(t)return this.beanName=t},s.prototype.getFactoryBeanName=function(){return this.factoryBeanName?this.factoryBeanName:this.parentBean?this.parentBean.factoryBeanName:void 0},s.prototype.setFactoryBeanName=function(t){t&&(this.factoryBeanName=t)},s.prototype.getFactoryMethodName=function(){return this.factoryMethodName?this.factoryMethodName:this.parentBean?this.parentBean.factoryMethodName:void 0},s.prototype.setFactoryMethodName=function(t){t&&(this.factoryMethodName=t)},s.prototype.getScope=function(){return this.scope},s.prototype.setScope=function(t){t&&(this.scope=t)},s.prototype.isAbstract=function(){return this.abstract},s.prototype.setAbstract=function(t){i.isNotNull(t)&&(this.abstract=t)},s.prototype.isLazyInit=function(){return this.lazyInit?this.lazyInit:this.parentBean?this.parentBean.lazyInit:void 0},s.prototype.setLazyInit=function(t){i.isNotNull(t)&&(this.lazyInit=t)},s.prototype.needProxy=function(){return this.proxy},s.prototype.setProxy=function(t){i.isNotNull(t)&&(this.proxy=t)},s.prototype.isAsyncInit=function(){return this.asyncInit?this.asyncInit:this.parentBean?this.parentBean.asyncInit:void 0},s.prototype.setAsyncInit=function(t){i.isNotNull(t)&&(this.asyncInit=t)},s.prototype.setAspect=function(t){i.isNotNull(t)&&(this.aspect=t)},s.prototype.isAspect=function(){return this.aspect?this.aspect:this.parentBean?this.parentBean.aspect:void 0},s.prototype.getProps=function(){return this.propsOn},s.prototype.getPropsOn=function(){return this.propsOn},s.prototype.setPropsOn=function(t){t&&i.checkArray(t)&&t.length&&this.updateSettingsOn(this,r.SETTINGS_PROPS_ON,t)},s.prototype.getArgs=function(){return this.argsOn},s.prototype.getArgsOn=function(){return this.argsOn},s.prototype.setArgsOn=function(t){t&&i.checkArray(t)&&t.length&&this.updateSettingsOn(this,r.SETTINGS_ARGS_ON,t)},s.prototype.getFactoryArgs=function(){return this.factoryArgsOn},s.prototype.getFactoryArgsOn=function(){return this.factoryArgsOn},s.prototype.setFactoryArgsOn=function(t){t&&i.checkArray(t)&&t.length&&this.updateSettingsOn(this,r.SETTINGS_FACTORY_ARGS_ON,t)},s.prototype.getInitMethodName=function(){return this.initMethodName?this.initMethodName:this.parentBean?this.parentBean.initMethodName:void 0},s.prototype.setInitMethodName=function(t){t&&(this.initMethodName=t)},s.prototype.getDestroyMethodName=function(){return this.destroyMethodName?this.destroyMethodName:this.parentBean?this.parentBean.destroyMethodName:void 0},s.prototype.setDestroyMethodName=function(t){t&&(this.destroyMethodName=t)},s.prototype.getFunc=function(){return this.func},s.prototype.setFunc=function(t){this.func||(this.func=t)},s.prototype.getOrder=function(){return this.order||0==this.order?this.order:this.parentBean?this.parentBean.order:void 0},s.prototype.setOrder=function(t){i.isNotNull(t)&&(this.order=t)},s.prototype.isSingleton=function(){return this.scope===r.SCOPE_SINGLETON},s.prototype.isPrototype=function(){return this.scope===r.SCOPE_PROTOTYPE},s.prototype.hasFactoryBean=function(){return i.isNotNull(this.factoryBeanName)&&i.isNotNull(this.factoryMethodName)},s.prototype.hasInitMethod=function(){return i.isNotNull(this.initMethodName)},s.prototype.hasParent=function(){return i.isNotNull(this.parentName)},s.prototype.updateSettingsOn=function(t,e,n){var r=t[e],i=o.getBeanSettingsMap(r),s=o.getBeanSettingsMap(n);for(var a in s)i[a]||(i[a]=s[a]);t[e]=o.getBeanSettingsArray(i)},e.exports=s},{"../../util/beanUtil":35,"../../util/constant":36,"../../util/utils":43}],14:[function(t,e,n){var r=t("pomelo-logger").getLogger("bearcat","BeanDefinitionVisitor"),o=t("../../util/constant"),i=t("../../util/utils"),s=function(t){this.valueResolver=t};s.prototype.setValueResolver=function(t){this.valueResolver=t},s.prototype.getValueResolver=function(){return this.valueResolver},s.prototype.resolveStringValue=function(t){if(this.valueResolver)return this.getValueResolver().resolveStringValue(t);r.error("No StringValueResolver specified")},s.prototype.visitBeanDefinition=function(t){this.visitParentName(t),this.visitPropertyValues(t),this.visitArgumentsValues(t)},s.prototype.visitParentName=function(t){var e=t.getParentName();if(i.isNotNull(e)){var n=this.resolveStringValue(e);e!==n&&i.isNotNull(n)&&t.setParentName(n)}},s.prototype.visitPropertyValues=function(t){for(var e=t.getProps(),n=0;n<e.length;n++){var r=e[n];if(r.getDependType()===o.DEPEND_TYPE_VALUE){var s=r.getValue(),a=this.resolveStringValue(s);s!==a&&i.isNotNull(a)&&r.setValue(a)}}},s.prototype.visitArgumentsValues=function(t){for(var e=t.getArgs(),n=0;n<e.length;n++){var r=e[n];if(r.getDependType()===o.DEPEND_TYPE_VALUE){var s=r.getValue(),a=this.resolveStringValue(s);s!==a&&i.isNotNull(a)&&r.setValue(a)}}},e.exports=s},{"../../util/constant":36,"../../util/utils":43,"pomelo-logger":56}],15:[function(t,e,n){var r,o=t("../../util/requestUtil"),i=(t("../../util/utils"),{}),s={},a={},c={INIT:0,FETCHING:1,SAVED:2,LOADING:3,LOADED:4,ERROR:5},u=function(t,e,n){this.uri=t,this.dependencies=e||[],this.deps={},this.remain=0,this.entries=[],this.history={},this.loader=n,this.callback=null,this.status=c.INIT};u.prototype.resolve=function(){for(var t=this.dependencies,e=[],n=this.getLoader(),r=t.length,o=0;o<r;o++)e[o]=n.resolve(t[o],this.uri);return e},u.prototype.pass=function(){for(var t=this,e=t.dependencies.length,n=0;n<t.entries.length;n++){for(var r=t.entries[n],o=0,i=0;i<e;i++){var s=t.deps[t.dependencies[i]];s.status<c.LOADED&&!r.history.hasOwnProperty(s.uri)&&(r.history[s.uri]=!0,o++,s.entries.push(r),s.status===c.LOADING&&s.pass())}o>0&&(r.remain+=o-1,t.entries.shift(),n--)}},u.prototype.load=function(){var t=this;if(!(this.status>=c.LOADING)){var e=this.getLoader();t.status=c.LOADING;for(var n=t.resolve(),r=0,o=n.length;r<o;r++)t.deps[t.dependencies[r]]=e.get(n[r]);if(t.pass(),t.entries.length)t.onload();else{var i,s={};for(r=0;r<o;r++)(i=e.get(n[r])).status<c.FETCHING?i.fetch(s):i.status===c.SAVED&&i.load();for(var a in s)s.hasOwnProperty(a)&&s[a]()}}},u.prototype.onload=function(){this.status=c.LOADED;for(var t=(this.entries||[]).length,e=0;e<t;e++){var n=this.entries[e];0==--n.remain&&n.callback()}delete this.entries},u.prototype.error=function(){this.onload(),this.status=c.ERROR},u.prototype.fetch=function(t){var e=this,n=e.uri;console.log("do fetch "+n);var u=this.getLoader();e.status=c.FETCHING;var p={uri:n},l=p.requestUri||n;function f(){o.request(p.requestUri,p.onRequest,p.charset,p.crossorigin)}l&&!s.hasOwnProperty(l)?i.hasOwnProperty(l)?a[l].push(e):(i[l]=!0,a[l]=[e],(p={uri:n,requestUri:l,onRequest:function(t){delete i[l],s[l]=!0,r&&(u.save(n,r),r=null);var e,o=a[l];delete a[l];for(;e=o.shift();)!0===t?e.error():e.load()},charset:"utf-8",crossorigin:!1}).requested||(t?t[p.requestUri]=f:f())):e.load()},u.prototype.addEntry=function(t){this.entries.push(t)},u.prototype.setRemain=function(t){this.remain=t},u.prototype.setLoader=function(t){this.loader=t},u.prototype.getLoader=function(){return this.loader},u.STATUS=c,u.anonymousMeta=r,e.exports=u},{"../../util/requestUtil":40,"../../util/utils":43}],16:[function(t,e,n){t("pomelo-logger").getLogger("bearcat","BeanWrapper");var r=t("../../util/constant"),o=t("../../util/utils"),i=function(){this.name=null,this.type=null,this.value=null,this.ref=null,this.role=null,this.bean=null};i.prototype.getDependType=function(){return this.role},i.prototype.getName=function(){return this.name},i.prototype.setName=function(t){this.name=t},i.prototype.getType=function(){return this.type},i.prototype.setType=function(t){this.type=t},i.prototype.getValue=function(){return this.value},i.prototype.setValue=function(t){this.value=t},i.prototype.getValueOnce=function(){var t=this.value;return this.value=null,t},i.prototype.getRef=function(){return this.ref},i.prototype.setRef=function(t){this.ref=t},i.prototype.getRole=function(){return this.role},i.prototype.setRole=function(){var t=r.DEPEND_TYPE_ERROR;this.name||(t=r.DEPEND_TYPE_ERROR),this.ref&&(t=r.DEPEND_TYPE_BEAN),this.value&&(t=r.DEPEND_TYPE_VALUE),this.type&&o.checkType(this.type)&&(t=r.DEPEND_TYPE_VAR),this.role=t},i.prototype.getBean=function(){return this.bean},i.prototype.setBean=function(t){this.bean=t},e.exports=i},{"../../util/constant":36,"../../util/utils":43,"pomelo-logger":56}],17:[function(t,e,n){(function(n){var r,o=t("../../resource/propertiesLoader"),i=t("./beanDefinitionVisitor"),s=t("./placeHolderResolver"),a=t("../../util/constant"),c=t("../../util/utils"),u=n.cwd()+"/config";!function(){r=this}();var p=function(){this.beanName=null,this.env=a.DEFAULT_ENV,this.cpath=u,this.properties={}};p.prototype.postProcessBeanFactory=function(t){this.loadProperties(),this.processProperties(t)},p.prototype.loadProperties=function(){var t=null;t=r.__bearcatData__&&r.__bearcatData__.configData?r.__bearcatData__.configData:this.getPropertiesLoader().loadProperties(this.getConfigPath(),this.getEnv()),this.mergeProperties(t)},p.prototype.mergeProperties=function(t){for(var e in t)c.isNotNull(t[e])&&(this.properties[e]=t[e])},p.prototype.processProperties=function(t){var e=this.getProperties();if(!c.checkObjectEmpty(e)){var n=new s(e);this.doProcessProperties(t,n)}},p.prototype.doProcessProperties=function(t,e){var n=new i(e),r=t.getBeanDefinitions();for(var o in r){var s=r[o];n.visitBeanDefinition(s)}},p.prototype.getPropertiesLoader=function(){return new o},p.prototype.setBeanName=function(t){this.beanName=t},p.prototype.getBeanName=function(){return this.beanName},p.prototype.setEnv=function(t){this.env=t},p.prototype.getEnv=function(){return this.env},p.prototype.setConfigPath=function(t){this.cpath=t},p.prototype.getConfigPath=function(){return this.cpath},p.prototype.setProperties=function(t){this.properties=t},p.prototype.getProperties=function(){return this.properties},e.exports=p}).call(this,t("_process"))},{"../../resource/propertiesLoader":32,"../../util/constant":36,"../../util/utils":43,"./beanDefinitionVisitor":14,"./placeHolderResolver":18,_process:49}],18:[function(t,e,n){var r=t("../../util/utils"),o=function(t){this.placeholderPrefix="${",this.placeholderSuffix="}",this.valueSeparator=":",this.properties=t};o.prototype.resolveStringValue=function(t){if(!r.checkString(t))return null;var e=this.doReplace(t);return r.isNotNull(e)||(e=t),e},o.prototype.setProperties=function(t){this.properties=t},o.prototype.getProperties=function(){return this.properties},o.prototype.doReplace=function(t){if(!t)return null;var e=this.getProperties();if(!e)return null;for(var n,r,o,i=/\$\{(.*?)\}/g,s="",a=0,c=!0;n=i.exec(t);)r=n[1],(o=t.substring(a,n.index)).length&&(s+=o),a=i.lastIndex,o.length?s+=e[r]:s=e[r],c=!1;return a<t.length&&(s+=t.substring(a)),c?null:s},e.exports=o},{"../../util/utils":43}],19:[function(t,e,n){var r,o=t("pomelo-logger").getLogger("bearcat","app"),i=t("./context/applicationContext"),s=t("events").EventEmitter,a=(t("./beans/beanFactory"),t("../package.json")),c=t("./util/utils");!function(){r=this}();var u={opts:null,configLocations:null,applicationContext:null,state:1,startTime:null,version:a.version};u.__proto__=s.prototype,u.createApp=function(t,e){return this.state>=2&&u.stop(),!c.checkArray(t)&&c.checkObject(t)&&(e=t,t=[]),this.opts=e||{},this.configLocations=t||[],this.opts.BEARCAT_GLOBAL&&(r.bearcat=u,r.Bearcat=u),c.checkObject(this.opts)||o.warn("Bearcat createApp opts must be object..."),this.applicationContext=new i(this.configLocations,this.opts),this.state=2,u},u.start=function(t){if(c.checkFunction(t)||(t=function(){}),this.state>2)return o.warn("Bearcat has already start, run bearcat.stop to start again."),t();if(this.state<2)return o.warn("Bearcat does not inited, run bearcat.createApp to init."),t();this.state=3,this.startTime=Date.now();var e=this,n="";c.checkBrowser()&&(n="browser",this.applicationContext.setEnv(n)),c.checkCocos2dJsb()&&(n="cocos2djsb",this.applicationContext.setEnv(n)),this.applicationContext.on("finishRefresh",function(){e.state=4,n=e.applicationContext.getEnv(),o.info("Bearcat startup in %s with %s ms",n,Date.now()-e.startTime),t()}),this.applicationContext.on("reload",function(){e.emit("reload")}),this.applicationContext.refresh()},u.stop=function(){this.applicationContext&&this.applicationContext.destroy(),this.applicationContext=null,this.configLocations=null,this.startTime=null,this.state=1},u.getBeanFactory=function(){if(!(this.state<=2))return this.applicationContext.getBeanFactory();o.warn("Bearcat application is not running now for %s","getBeanFactory")},u.getApplicationContext=function(){if(!(this.state<=2))return this.applicationContext;o.warn("Bearcat application is not running now for %s","getApplicationContext")},u.getBeanByMeta=function(t){if(!(this.state<=2))return this.applicationContext.getBeanByMeta(t);o.warn("Bearcat application is not running now for %s %j","getBeanByMeta",t)},u.getBeanByFunc=function(t){if(!(this.state<=2))return this.applicationContext.getBeanByFunc(t);o.warn("Bearcat application is not running now for %s","getBeanByFunc")},u.use=function(t){return c.checkArray(t)?this.applicationContext.use(t):c.checkString(t)?this.applicationContext.use([t]):void 0},u.async=function(t,e){return c.checkArray(t)?this.applicationContext.async(t,e):c.checkString(t)?this.applicationContext.async([t],e):void 0},u.meta=function(t,e){return this.state<4?this.applicationContext.meta(t,e):this.getBean(t)},u.module=function(t,e){return this.state<4?this.applicationContext.module(t,e):this.getBean(t)},u.getBean=function(t){if(!(this.state<=2)){var e=t,n="";if(c.checkObject(e))n="getBeanByMeta";else if(c.checkFunction(e))n="getBeanByFunc";else{if(!c.checkString(e))return void o.error("Bearcat application unsupported getBean arguments for %s",t);n="getBean"}return this.applicationContext[n].apply(this.applicationContext,arguments)}o.warn("Bearcat application is not running now for %s %s state: %d","getBean",t,this.state)},u.getFunction=function(t){if(!(this.state<=2))return this.applicationContext.getBeanFunction(t);o.warn("Bearcat application is not running now for %s %s state: %d","getFunction",t,this.state)},u.getModel=function(t){if(!(this.state<=2))return this.applicationContext.getModel(t);o.warn("Bearcat application is not running now for %s %s state: %d","getModel",t,this.state)},u.getRoute=function(t,e){if(4===this.state){var n=this.getBean(t);return n[e].bind(n)}},e.exports=u},{"../package.json":53,"./beans/beanFactory":11,"./context/applicationContext":20,"./util/utils":43,events:46,"pomelo-logger":56}],20:[function(t,e,n){(function(n){var r,o=t("pomelo-logger").getLogger("bearcat","ApplicationContext"),i=t("../beans/support/placeHolderConfigurer"),s=t("../aop/autoproxy/autoProxyCreator"),a=t("../model/modelKeyMapResolver"),c=t("../resource/asyncScriptLoader"),u=t("../resource/bootStrapLoader"),p=t("../resource/resourceLoader"),l=t("../model/constraints"),f=t("../beans/beanFactory"),h=t("events").EventEmitter,y=t("../util/requireUtil"),g=t("../util/constant"),d=t("../util/fileUtil"),v=t("../util/metaUtil"),m=t("../util/utils"),b=y.requirePath(),A=y.requireUtil(),E="",B="",_="";!function(){r=this}();var F=function(t,e){this.opts=e||{},this.configLocations=t,this.loadBeans=[],this.active=!1,this.reloadMap={},this.beanFactory=null,this.startUpDate=null,this.resourceLoader=null,this.bootStrapLoader=null,this.asyncScriptLoader=null,this.cpath=B,this.hpath=_,this.env=g.DEFAULT_ENV,this.base=E,this.beanFactoryPostProcessors=[],h.call(this),this.init()};e.exports=F,A.inherits(F,h),F.prototype.init=function(){if(this.hasBeanFactory()&&(this.destroyBeans(),this.closeBeanFactory()),E=n.cwd(),this.configLocations.length){var t=this.configLocations[0];E=b.dirname(t)}B=E+"/config",_=E+"/app",this.cpath=B,this.hpath=_,this.base=E,this.createBeanFactory()},F.prototype.setStartupDate=function(t){this.startUpDate=t},F.prototype.getStartupDate=function(){return this.startUpDate},F.prototype.getResourceLoader=function(){return this.resourceLoader=new p,this.resourceLoader},F.prototype.getAsyncScriptLoader=function(){return this.asyncScriptLoader?this.asyncScriptLoader:(this.asyncScriptLoader=new c,this.asyncScriptLoader.setApplicationContext(this),this.asyncScriptLoader)},F.prototype.getBootStrapLoader=function(){return this.bootStrapLoader?this.bootStrapLoader:(this.bootStrapLoader=new u,this.bootStrapLoader)},F.prototype.getResource=function(t){return r.__bearcatData__&&r.__bearcatData__.metas?r.__bearcatData__.metas:this.resourceLoader.load(t)},F.prototype.getConfigLocations=function(){return this.configLocations},F.prototype.addBeanFactoryPostProcessor=function(t){this.beanFactoryPostProcessors.push(t)},F.prototype.getBeanFactoryProcessors=function(){return this.beanFactoryPostProcessors},F.prototype.refresh=function(t){var e=this;t=t||function(){},e.prepareRefresh(),e.refreshBeanFactory(),e.tryAsyncLoading(function(){e.tryBootStrapLoading(),e.prepareBeanFactory(),e.postProcessBeanFactory(),e.invokeBeanFactoryPostProcessors(),e.registerBeanPostProcessors(),e.finishBeanFactoryIntialization(function(){e.finishRefresh(),t()})})},F.prototype.prepareRefresh=function(){this.startUpDate=Date.now(),this.active=!0;var e=this.opts;e.NODE_ENV&&(n.env.NODE_ENV=e.NODE_ENV),e.BEARCAT_ENV&&(n.env.BEARCAT_ENV=e.BEARCAT_ENV),e.NODE_CPATH&&(n.env.NODE_CPATH=e.NODE_CPATH),e.BEARCAT_CPATH&&(n.env.BEARCAT_CPATH=e.BEARCAT_CPATH),e.BEARCAT_LOGGER&&"off"===e.BEARCAT_LOGGER&&(n.env.BEARCAT_LOGGER="off"),e.BEARCAT_HOT&&"on"===e.BEARCAT_HOT&&(n.env.BEARCAT_HOT="on"),e.BEARCAT_ANNOTATION&&"off"===e.BEARCAT_ANNOTATION&&(n.env.BEARCAT_ANNOTATION="off"),e.BEARCAT_FUNCTION_STRING&&(n.env.BEARCAT_FUNCTION_STRING=!0),this.getResourceLoader(),this.beanFactoryPostProcessors=[];var r=m.parseArgs(n.argv),o=this.getEnv();o=r.env||r["--env"]||n.env.NODE_ENV||n.env.BEARCAT_ENV||o||g.DEFAULT_ENV,this.setEnv(o);var i=this.getConfigPath();if(i=r.cpath||r["--cpath"]||n.env.NODE_CPATH||n.env.BEARCAT_CPATH||i,this.setConfigPath(i),!m.checkBrowser()){v.cleanUp();var s=this.getBase();if("off"!==n.env.BEARCAT_LOGGER){var a=b.join(i,g.LOGPATH),c=b.join(i,o,g.LOGPATH);d.existsSync(a)?t("pomelo-logger").configure(a,{base:s}):d.existsSync(c)&&t("pomelo-logger").configure(c,{base:s})}var u=this.getHotPath();u=r.hpath||r["--hpath"]||e.BEARCAT_HPATH||u,this.setHotPath(u),"on"===n.env.BEARCAT_HOT&&this.hotReloadFileWatch(u)}},F.prototype.refreshBeanFactory=function(){this.configLocations=this.getConfigLocations(),this.loadDefaultConstraints();for(var t=this.configLocations.length,e=0;e<t;e++)this.beanFactory.registerBeans(this.getResource(this.configLocations[e]));t||this.beanFactory.registerBeans(this.getResource())},F.prototype.tryAsyncLoading=function(t){if(!m.checkBrowser()||m.checkCocos2dJsb())return t();var e=this.loadBeans;return e&&e.length?this.doAsyncLoading(t):t()},F.prototype.doAsyncLoading=function(t){var e=this.loadBeans;return this.getAsyncScriptLoader().load(e,t)},F.prototype.tryBootStrapLoading=function(){if(m.checkCocos2dJsb()&&(r.__bearcatData__&&r.__bearcatData__.idPaths))return idPaths=r.__bearcatData__.idPaths,this.getBootStrapLoader().load(idPaths)},F.prototype.prepareBeanFactory=function(){var t=new i;m.isNotNull(this.env)&&t.setEnv(this.env),m.isNotNull(this.cpath)&&t.setConfigPath(this.cpath);var e=new a;this.addBeanFactoryPostProcessor(t),this.addBeanFactoryPostProcessor(e)},F.prototype.registerBeanMeta=function(t){var e=t.id;if(e){var n={};n[e]=t,this.beanFactory.registerBeans(n)}else o.error("ApplicationContext registerBean error meta no id.")},F.prototype.loadDefaultConstraints=function(){for(var t in l)this.getBeanByFunc(l[t])},F.prototype.hotReloadFileWatch=function(e){var n=this,r=t("chokidar").watch(e,{ignored:/[\/\\]\./,ignoreInitial:!0});r&&(o.info("bearcat hot reload watch %j",e),r.on("all",function(t,e){if("change"==t||"add"==t){var r=e;if(m.checkString(r)){var i=m.getFileName(r,".js".length);if(m.checkFileType(r,".js")&&m.isFile(r)){var s=Math.floor(5*Math.random(0,1)),a=Math.floor(100*Math.random(0,1));setTimeout(function(){o.info("%j changed, bearcat start hot reloading ...",r);var e=m.myRequireHot(r);if(e){if(m.checkFunction(e)&&(e=v.resolveFuncAnnotation(e,null,!0)),m.checkObject(e)){i=e.id;var s=e.func;if("add"==t)o.info("bearcat reload add bean %s",i),n.registerBeanMeta(e);else if(i&&m.checkFunction(s)){var a=n.getBeanFactory().getBeanFunction(i);if(n.doHotAddAttributes(e,i),a){var c=s.prototype;for(var u in c)o.info("bearcat reload update prototype %s:%s",i,u),a.prototype[u]=c[u]}}}n.emit("reload"),o.info("Bearcat hot reloading done ...")}},1e3*s+a+s)}}}}))},F.prototype.doHotAddAttributes=function(t,e){var n=this.getBeanFactory(),r=n.getBeanFunction(e),i=n.getBeanDefinition(e);if(i){var s=r.prototype,a=i.getPropsOn(),c=t.props;if(m.checkArray(c))for(var u=0;u<c.length;u++)!function(t){var r=t.name,i=1;for(j=0;j<a.length;j++){if(r===a[j].getName()){i=0;break}}if(i){var c=t.value,u=t.ref,p="";u&&(p=g.DEFINE_GETTER_PREFIX+r),o.info("hot reload add attribute %s to %s",r,e),s.__defineGetter__(r,function(){return c||(u?(this[p]||(this[p]=n.getBean(u)),this[p]):void 0)})}}(c[u])}},F.prototype.postProcessBeanFactory=function(){},F.prototype.registerBeanPostProcessors=function(){var t=new s;t.setBeanFactory(this.getBeanFactory()),this.beanFactory.addBeanPostProcessor(t)},F.prototype.invokeBeanFactoryPostProcessors=function(){for(var t=this.getBeanFactory(),e=this.getBeanFactoryProcessors(),n=0;n<e.length;n++){e[n].postProcessBeanFactory(t)}},F.prototype.finishBeanFactoryIntialization=function(t){this.beanFactory.preInstantiateSingletons(t)},F.prototype.finishRefresh=function(){var t=this;if(this.emit("finishRefresh"),!n.browser){var e=n.listeners("SIGINT");e&&e.length||n.on("SIGINT",function(){o.info("Bearcat starts destroying..."),t.destroy(),n.exit()})}},F.prototype.cancelRefresh=function(){this.active=!1},F.prototype.registerShutdownHook=function(){},F.prototype.destroy=function(){this.close()},F.prototype.close=function(){this.doClose()},F.prototype.doClose=function(){this.configLocations=null,this.startUpDate=null,this.active=!1,this.hasBeanFactory()&&(this.destroyBeans(),this.closeBeanFactory()),v.cleanUp(),this.beanFactory=null,this.resourceLoader=null,this.beanFactoryPostProcessors=[],this.cpath=B,this.env=g.DEFAULT_ENV,this.emit("destroyed")},F.prototype.destroyBeans=function(){this.getBeanFactory().destroySingletons()},F.prototype.isActive=function(){return this.active},F.prototype.getBean=function(t){var e=this.getBeanFactory();return e.getBean.apply(e,arguments)},F.prototype.getBeanByMeta=function(t){var e=t.id;if(e)return this.getBeanDefinition(e)||(this.registerBeanMeta(t),this.invokeBeanFactoryPostProcessors()),arguments[0]=e,this.beanFactory.getBeanProxy.apply(this.beanFactory,arguments);o.error("ApplicationContext getBeanByMeta error meta no id.")},F.prototype.getBeanByFunc=function(t){var e=v.resolveFuncAnnotation(t),n=e.id;if(n)return this.getBeanDefinition(n)||(e.lazy=!0,this.registerBeanMeta(e),this.invokeBeanFactoryPostProcessors()),arguments[0]=n,this.beanFactory.getBeanProxy.apply(this.beanFactory,arguments);o.error('ApplicationContext getBeanByFunc error meta no id, add this.$id = "yourId" to your func.')},F.prototype.getModel=function(t){if(t)return this.beanFactory.getModelProxy(t);o.error("ApplicationContext getModel error no modelId.")},F.prototype.getModelDefinition=function(t){if(t)return this.beanFactory.getModelDefinition(t);o.error("ApplicationContext getModelDefinition error no modelId.")},F.prototype.getBeanFunction=function(t){return this.beanFactory.getBeanFunction(t)},F.prototype.meta=function(t,e){var n=(t=v.resolveMetaAnnotation(t)).id;if(n){if(!this.getBeanDefinition(n)){if(!m.checkBrowser()&&m.isNotNull(e)&&e.exports)return e.exports=t;if(m.checkBrowser())this.getAsyncScriptLoader().module(n,t);return this.registerBeanMeta(t)}}else o.error('ApplicationContext module error meta no id, add this.$id = "yourId" to your func.')},F.prototype.module=function(t,e){var n=v.resolveFuncAnnotation(t),r=n.id;if(r){if(!this.getBeanDefinition(r)){if(!m.checkBrowser()&&m.isNotNull(e)&&e.exports)return e.exports=t;if(m.checkBrowser())this.getAsyncScriptLoader().module(r,n);return this.registerBeanMeta(n)}}else o.error('ApplicationContext module error meta no id, add this.$id = "yourId" to your func.')},F.prototype.use=function(t){this.loadBeans=this.loadBeans.concat(t)},F.prototype.async=function(t,e){return(new c).load(loadBeans,e)},F.prototype.containsBean=function(t){return this.getBeanFactory().containsBean(t)},F.prototype.isSingleton=function(t){return this.getBeanFactory().isSingleton(t)},F.prototype.isPrototype=function(t){return this.getBeanFactory().isPrototype(t)},F.prototype.containsBeanDefinition=function(t){return this.getBeanFactory().containsBeanDefinition(t)},F.prototype.isRunning=function(){return this.active},F.prototype.closeBeanFactory=function(){this.getBeanFactory().destroyBeanFactory(),this.beanFactory=null},F.prototype.hasBeanFactory=function(){return null!=this.beanFactory},F.prototype.getBeanFactory=function(){return this.beanFactory},F.prototype.createBeanFactory=function(){this.beanFactory=new f},F.prototype.getBeanDefinition=function(t){return this.getBeanFactory().getBeanDefinition(t)},F.prototype.removeBeanDefinition=function(t){return this.getBeanFactory().removeBeanDefinition(t)},F.prototype.setEnv=function(t){this.env=t},F.prototype.getEnv=function(){return this.env},F.prototype.setConfigPath=function(t){this.cpath=t},F.prototype.getConfigPath=function(){return this.cpath},F.prototype.setHotPath=function(t){this.hpath=t},F.prototype.getHotPath=function(){return this.hpath},F.prototype.getBase=function(){return this.base}}).call(this,t("_process"))},{"../aop/autoproxy/autoProxyCreator":4,"../beans/beanFactory":11,"../beans/support/placeHolderConfigurer":17,"../model/constraints":21,"../model/modelKeyMapResolver":26,"../resource/asyncScriptLoader":28,"../resource/bootStrapLoader":29,"../resource/resourceLoader":33,"../util/constant":36,"../util/fileUtil":37,"../util/metaUtil":38,"../util/requireUtil":41,"../util/utils":43,_process:49,chokidar:55,events:46,"pomelo-logger":56}],21:[function(t,e,n){(function(n){var r=t("../../util/utils"),o={};if(!r.checkBrowser()){var i=t("fs"),s=t("path");i.readdirSync(n).forEach(function(e){if(/\.js$/.test(e)&&"index.js"!==e){var r=s.basename(e,".js");o.__defineGetter__(r,function(){return t(n+"/"+r)})}})}e.exports=o}).call(this,"/lib/model/constraints")},{"../../util/utils":43,fs:45,path:48}],22:[function(t,e,n){var r=t("../util/constant"),o=t("../util/utils"),i=t("util"),s=function(){this.ref=null,this.name=null,this.type=null,this.prefix=null,this.default=null,this.primary=!1,this.balance=!1,this.constraints=[],this.expression=null};s.prototype.filter=function(t){if(o.isNotNull(t)){var e=this.filterType(t);if(o.checkModelFilterError(e))return e;for(var n=this.name,i=this.constraints,s=r.CONSTRAINT_METHOD,a=0;a<i.length;a++){var c=i[a];if(c&&o.checkFunction(c[s])&&(e=c[s](n,t),o.checkModelFilterError(e)))return e}}},s.prototype.filterType=function(t){var e=this.type;if(o.checkString(e)){var n=e;if(!0!==o.isType(n)(t)){return new Error(i.format("field: %s with value: %s error, type not matched with %s",this.name,t,n))}}},s.prototype.parse=function(t,e){if(t&&(t=t.replace(/\s/g,""))[0]===r.CONSTRAINT_ANNOTATION)for(var n=(t=t.substr(1)).split(r.CONSTRAINT_SPLIT),i=0;i<n.length;i++){var s="",a="",c=-1,u=[],p=n[i];if(p)if(p!==r.MODEL_ATTRIBUTE_PRIMARY)if(p!==r.MODEL_ATTRIBUTE_BALANCE){if(-1!=(c=p.indexOf(":"))){var l=p.split(":");if(s=l[0].toLowerCase(),l.length>=2){if(a=l[1],this.checkProps(s)){"type"===s&&(a=o.normalizeType(a)),this[s]=a;continue}u.push({name:s,value:a})}}if(-1!=(c=p.indexOf("("))){if(!(s=p.substr(0,c)))continue;var f=p.substr(c),h=f.length;if(")"!==f[h-1])continue;for(var y=(f=f.substr(1,h-2)).split(","),g=0;g<y.length;g++){var d=y[g].split("=");d.length<2||d[0]&&d[1]&&u.push({name:d[0],value:d[1]})}}s||(s=p);var v=e.getConstraint(s);if(v){var m=e.getConstraintDefinition(s).getConstraint();m&&this.parse(m,e);var b=u.length;if(b)for(var A=0;A<b;A++){var E=u[A],B=E.name,_=E.value;v[B]=_}this.addConstraints(v)}}else this[p]=!0;else this[p]=!0}},s.prototype.setExpression=function(t){this.expression=t},s.prototype.getExpression=function(){return this.expression},s.prototype.setRef=function(t){this.ref=t},s.prototype.getRef=function(){return this.ref},s.prototype.setName=function(t){this.name=t},s.prototype.getName=function(){return this.name},s.prototype.setType=function(t){this.type=t},s.prototype.getType=function(t){return this.type},s.prototype.setPrimary=function(t){this.primary=t},s.prototype.getPrimary=function(){return this.primary},s.prototype.setDefault=function(t){this.default=t},s.prototype.getDefault=function(){return this.default},s.prototype.setPrefix=function(t){this.prefix=t},s.prototype.getPrefix=function(){return this.prefix},s.prototype.isPrimary=function(){return this.primary},s.prototype.isBalance=function(){return this.balance},s.prototype.addConstraints=function(t){this.constraints.push(t)},s.prototype.checkProps=function(t){for(var e=r.MODEL_ATTRIBUTES,n=0;n<e.length;n++)if(t===e[n])return!0;return!1},e.exports=s},{"../util/constant":36,"../util/utils":43,util:52}],23:[function(t,e,n){var r=function(){this.id=null,this.cid=null,this.constraint=null};r.prototype.setId=function(t){this.id=t},r.prototype.getId=function(){return this.id},r.prototype.setCid=function(t){this.cid=t},r.prototype.getCid=function(){return this.cid},r.prototype.setConstraint=function(t){this.constraint=t},r.prototype.getConstraint=function(){return this.constraint},e.exports=r},{}],24:[function(t,e,n){var r=t("../util/utils"),o=function(){this.id=null,this.mid=null,this.table=null,this.prefix=null,this.balance=null,this.fields={},this.refFields=[],this.modelKeyMap={},this.oneToMany=!1};o.prototype.setId=function(t){this.id=t},o.prototype.getId=function(){return this.id},o.prototype.setMid=function(t){this.mid=t},o.prototype.getMid=function(){return this.mid},o.prototype.setTable=function(t){t&&(this.table=t)},o.prototype.getTable=function(){return this.table},o.prototype.setPrefix=function(t){t&&(this.prefix=t)},o.prototype.getPrefix=function(){return this.prefix},o.prototype.setBalance=function(t){t&&(this.balance=t)},o.prototype.getBalance=function(){return this.balance},o.prototype.setFields=function(t){r.isNotNull(t)&&(this.fields=t)},o.prototype.getFields=function(){return this.fields},o.prototype.getField=function(t){return this.fields[t]},o.prototype.addRefField=function(t){this.refFields.push(t)},o.prototype.setRefFields=function(t){r.isNotNull(t)&&(this.refFields=t)},o.prototype.getRefFields=function(){return this.refFields},o.prototype.setModelKeyMap=function(t){this.modelKeyMap=t},o.prototype.getModelKeyMap=function(){return this.modelKeyMap},o.prototype.setOneToMany=function(t){this.oneToMany=t},o.prototype.isOneToMany=function(){return this.oneToMany},e.exports=o},{"../util/utils":43}],25:[function(t,e,n){t("pomelo-logger").getLogger("bearcat","ModelFilter");var r=t("../util/utils"),o=function(){this.modelBean=null,this.modelDefinition=null};o.prototype.setModel=function(t){this.modelBean=t},o.prototype.getModel=function(){return this.modelBean},o.prototype.setModelDefinition=function(t){this.modelDefinition=t},o.prototype.getModelDefinition=function(){return this.modelDefinition},o.prototype.filter=function(t,e){return r.checkString(t)?this.doFilterKey(t,e):this.doFilterKeys()},o.prototype.doFilterKey=function(t,e){var n=this.modelDefinition.getField(t);if(n)return n.filter(e)},o.prototype.doFilterKeys=function(){var t=this.modelDefinition.getFields();for(var e in t){var n=t[e],o=this.modelBean[e],i=n.filter(o);if(r.checkModelFilterError(i))return i}},e.exports=o},{"../util/utils":43,"pomelo-logger":56}],26:[function(t,e,n){var r=t("pomelo-logger").getLogger("bearcat","ModelKeyMapResolver"),o=function(){};o.prototype.postProcessBeanFactory=function(t){this.processModelKeyMap(t)},o.prototype.processModelKeyMap=function(t){var e=t.getModelDefinitions();for(var n in e){var r=e[n],o={};this.processModelDefinition(t,r,o,{}),r.setModelKeyMap(o)}},o.prototype.processModelDefinition=function(t,e,n,o){var i=e.getFields(),s=e.getMid(),a=e.getPrefix(),c=o.prefix||a,u=o.pid,p=o.ptype,l=o.pfield;for(var f in i){var h=i[f],y=(f=h.getName(),h.getRef()),g=h.getPrefix(),d=h.getType(),v="";if(c&&(v+=c),v+=f,y){var m=t.getModelDefinition(y);if(!m){r.warn("model field ref id %s not exsit",y);continue}o={pid:s,ptype:d,pfield:f};g&&(o.prefix=g),this.processModelDefinition(t,m,n,o)}else n[v]={id:s,pid:u,ptype:p,pfield:l,fieldName:f,type:d}}},e.exports=o},{"pomelo-logger":56}],27:[function(t,e,n){var r=t("pomelo-logger").getLogger("bearcat","ModelProxy"),o=t("../util/constant"),i=t("../util/utils"),s=function(){this.model=null,this.modelFilter=null,this.beanFactory=null,this.beanDefinition=null,this.modelDefinition=null,this.beforeNames=[],this.afterNames=[],this.beforeName=null,this.afterName=null,this.beforeFlag=!1,this.afterFlag=!1};s.prototype.$set=function(t,e){var n=this.model;this.beforeFlag=!0;var r=this._getFilters(o.MODEL_FILTER_BEFORE),s=this._doFilters(r,t,e);if(i.checkModelFilterError(s))return this._result(s);n[t]=e;var a=this._getFilters(o.MODEL_FILTER_AFTER);return s=this._doFilters(a,t,e),i.checkModelFilterError(s),this._result(s)},s.prototype.$get=function(t){return this.model[t]},s.prototype.$pack=function(t){if(!i.checkObject(t))return new Error("pack data must be Object");var e=this.model;for(var n in t){var r=t[n];e[n]=r}this.afterFlag=!0;var s=this._getFilters(o.MODEL_FILTER_AFTER),a=this._doFilters(s);return i.checkModelFilterError(a),this._result(a)},s.prototype.$packResultSet=function(t){if(!i.checkObject(t))return new Error("resultSet must be Object");var e=this.beanFactory,n=this.modelDefinition.getMid();if(this){var o=this.modelDefinition.getModelKeyMap(),s=t,a={};for(var c in s){var u=s[c];if(!i.checkFunction(u)){var p=o[c];if(p){var l,f=p.id,h=p.fieldName,y=(p.type,p.pid||f),g=p.pfield||h,d=p.ptype;if(i.checkTypeArray(d)||i.checkTypeObject(d)){var v=y+"_"+g;(l=a[v])||(l=e.getModelProxy(f),a[v]=l)}else l=this;var m=l.$before().$set(h,u);if(i.checkModelFilterError(m))return m}else r.warn("packResultSet resultSet key %s does not match any model attribute",c)}}this._doPackResultSet(this,a)}else r.error("packResultSet error no such result model %s",n)},s.prototype.$before=function(t){return this._filter(o.MODEL_FILTER_BEFORE,t)},s.prototype.$after=function(t){return this._filter(o.MODEL_FILTER_AFTER,t)},s.prototype.$clone=function(){},s.prototype._modelInit=function(){var t=this.beanDefinition;if(t){var e=this,n=t.getFunc();if(i.checkFunction(n)){var o=n.prototype;for(interface in o)i.checkFunction(o[interface])&&function(t){c(t)?r.error("init error proxy method interface %j the same as ModelProxy, rename this name to another.",t):e[t]=function(){return e._modelInvoke(t,arguments)}}(interface)}}else r.error("init error no beanDefinition.")},s.prototype._modelInvoke=function(t,e){var n=this.model;if(i.checkFunction(n[t]))return n[t].apply(n,e);r.error("invoke error with %s %j",t,e)},s.prototype._doPackResultSet=function(t,e){var n=t.modelDefinition.getFields(),r=t.modelDefinition.getMid(),o=this.beanFactory;for(var s in n){var a=n[s],c=a.getRef(),u=a.getType(),p=e[r+"_"+s];if(!i.isNotNull(p)&&c){var l=o.getModelProxy(c);l&&(this._doPackResultSet(l,e),p=l)}if(i.isNotNull(p)){var f=!1;if(i.checkTypeArray(u)&&(f=!0),f){var h=t.$get(s);i.checkArray(h)||(h=[]),h.push(p),t.model[s]=h}else t.$set(s,p)}}},s.prototype._filter=function(t,e){return t!==o.MODEL_FILTER_BEFORE&&t!==o.MODEL_FILTER_AFTER?(r.warn("unknow model filter type %s",t),this):(this[t+"Flag"]=!0,i.checkString(e)&&(this[t+"Name"]=e),i.checkArray(e)&&(this[t+"Names"]=e),this)},s.prototype._getFilters=function(t){if(t===o.MODEL_FILTER_BEFORE||t===o.MODEL_FILTER_AFTER){var e=[];(t===o.MODEL_FILTER_BEFORE||t===o.MODEL_FILTER_AFTER&&!this.beforeFlag)&&this[t+"Flag"]&&e.push({type:o.FILTER_BUILTIN,method:o.FILTER_BUILTIN_METHOD});var n=this[t+"Name"];if(n){var r=this._modelInvoke(n);if(i.checkArray(r))for(var s=0;s<r.length;s++)e.push({type:o.FILTER_MODEL,method:r[s]})}for(var a=this[t+"Names"],c=0;c<a.length;c++)e.push({type:o.FILTER_MODEL,method:a[c]});return e}},s.prototype._doFilters=function(t,e,n){if(t&&t.length)for(var r,s=0;s<t.length;s++){var a=t[s],c=a.type,u=a.method;if(c===o.FILTER_BUILTIN&&(r=this.modelFilter[u](e,n),i.checkModelFilterError(r)))return r;if(c===o.FILTER_MODEL){var p=[];if(i.isNotNull(e)&&p.push(e),i.isNotNull(n)&&p.push(n),r=this._modelInvoke(u,p),i.checkModelFilterError(r))return r}}},s.prototype._result=function(t){return this._reset(o.MODEL_FILTER_BEFORE),this._reset(o.MODEL_FILTER_AFTER),t},s.prototype._reset=function(t){t!==o.MODEL_FILTER_BEFORE&&t!==o.MODEL_FILTER_AFTER||(this[t+"Flag"]=!1,this[t+"Name"]=null,this[t+"Names"]=[])},s.prototype.toJSON=function(){return this.model};var a=["_modelInit","_modelInvoke","$set","$pack","$packResultSet","_doPackResultSet","$get","$before","$after","_filter","$clone","_getFilters","_doFilters","_result","_reset","toJSON"],c=function(t){for(var e=0;e<a.length;e++)if(t===a[e])return!0;return!1};e.exports=s},{"../util/constant":36,"../util/utils":43,"pomelo-logger":56}],28:[function(t,e,n){var r,o=t("pomelo-logger").getLogger("bearcat","AsyncScriptLoader"),i=t("../beans/support/beanModule"),s=(t("../util/requireUtil").requirePath(),t("../util/scriptUtil")),a=t("../util/utils"),c=1;!function(){r=this}();var u=function(){this.cacheModules={},this.loaderDir=null,this.applicationContext=null};u.prototype.getLoadBeans=function(){return this.loadBeans},u.prototype.load=function(t,e){this.loaderDir=s.getLoaderDir();var n=this.loaderDir+"_load_"+c++,r=this.get(n,t);r.addEntry(r),r.setRemain(1),r.callback=function(){a.checkFunction(e)&&e(),delete r.callback,delete r.history,delete r.remain,delete r.entries},r.load()},u.prototype.save=function(t,e){var n=this.get(t);n.status<i.STATUS.SAVED&&(n.id=e.id||t,n.dependencies=e.deps||[],n.factory=e.factory,n.status=i.STATUS.SAVED)},u.prototype.module=function(t,e){var n=this.resolveDeps(e),r={id:t,uri:this.resolve(t),deps:n};r.uri?this.save(r.uri,r):i.anonymousMeta=r},u.prototype.resolve=function(t,e){var n=this.getPathById(t);return n||(n=t,o.warn("id: "+t+" can not be resolved, try run bearcat generate or use bearcat.module to register it")),n},u.prototype.resolveDeps=function(t){var e=t.props;if(a.isNotNull(e)&&e){for(var n=[],r=0;r<e.length;r++){var o=e[r].ref;if(o){if(this.applicationContext.getBeanDefinition(o))continue;n.push(o)}}return n}},u.prototype.getPathById=function(t){if(r.__bearcatData__&&r.__bearcatData__.idPaths)return r.__bearcatData__.idPaths[t]},u.prototype.get=function(t,e){return this.cacheModules[t]||(this.cacheModules[t]=new i(t,e,this))},u.prototype.setApplicationContext=function(t){this.applicationContext=t},e.exports=u},{"../beans/support/beanModule":15,"../util/requireUtil":41,"../util/scriptUtil":42,"../util/utils":43,"pomelo-logger":56}],29:[function(t,e,n){var r=function(){};r.prototype.load=function(e){for(var n in e){var r=e[n];t(r)}},e.exports=r},{}],30:[function(t,e,n){(function(n){var r=t("pomelo-logger").getLogger("bearcat","ConfigLoader"),o=t("../util/requireUtil"),i=t("../util/metaUtil"),s=t("../util/constant"),a=t("./metaLoader"),c=t("../util/utils"),u=o.requirePath(),p=function(){};e.exports=p,p.prototype.getMetaLoader=function(){return new a},p.prototype.getResources=function(t){var e=[],n={},r=this.getMetaLoader();for(var o in this.getRecursiveScanPath(t,e,n),n)r.setMetaObject(o,n[o]);for(var i=0;i<e.length;i++)r.load(e[i]);return r.getMetaObejcts()},p.prototype.getRecursiveScanPath=function(t,e,o){var a=c.myRequire(t);if(a){var p=a.scan,l=a.beans,f=a.imports,h=a.namespace,y=a.dependencies,g=u.dirname(t);for(var d in y)this.getRecursiveScanPath(g+"/node_modules/"+d+"/context.json",e,o);if(c.checkArray(f))for(var v=0;v<f.length;v++)this.getRecursiveScanPath(g+"/"+f[v],e,o);if(l)for(var m=0;m<l.length;m++){var b=l[m],A=b.id;h&&(A=h+s.NAMESPACE_SEPERATOR+A);var E=null,B="";if(c.checkString(b.func)&&(B=c.getLoadPath(b.func,t),E=c.myRequire(B)),E)if(c.checkFunction(E))b.func=E;else if(c.checkObject(E)){if(!E.id||E.id!==A){r.error("meta defined in file %j %j mismatch with that defined in context %j",B,E,b);continue}(b=i.mergeMeta(E,b)).ftype="object"}if(A){var _=o[A];o[A]=i.mergeMeta(b,_),B&&(b.fpath=u.resolve(n.cwd(),B))}}if(c.checkString(p)){var F=c.getLoadPath2(p,t);e.push(F)}if(c.checkArray(p))for(m=0;m<p.length;m++){F=c.getLoadPath2(p[m],t);e.push(F)}}}}).call(this,t("_process"))},{"../util/constant":36,"../util/metaUtil":38,"../util/requireUtil":41,"../util/utils":43,"./metaLoader":31,_process:49,"pomelo-logger":56}],31:[function(t,e,n){(function(n){var r=t("pomelo-logger").getLogger("bearcat","MetaLoader"),o=t("../util/fileUtil"),i=t("../util/metaUtil"),s=t("../util/constant"),a=t("../util/utils"),c=(t("path"),function(){this.metaObjects={}});e.exports=c,c.prototype.load=function(t){if(t){if(t=o.realpathSync(t),a.isDir(t))return this.loadPath(this.metaObjects,t),this.metaObjects;r.error("path should be directory.")}else r.error("load path should not be empty.")},c.prototype.setMetaObject=function(t,e){var n=this.metaObjects[t];this.metaObjects[t]=i.mergeMeta(e,n)},c.prototype.getMetaObejcts=function(){return this.metaObjects},c.prototype.loadFile=function(t){var e=a.myRequire(t);return"off"!==n.env.BEARCAT_ANNOTATION&&a.checkFunction(e)?i.resolveFuncAnnotation(e,t):a.checkObject(e)&&e&&e.id&&e.func?(t&&(e.ftype="object",e.fpath=t),e):void 0},c.prototype.loadPath=function(t,e){var n,r,c,u=o.readdirSync(e);"/"!==e.charAt(e.length-1)&&(e+="/");for(var p=0,l=u.length;p<l;p++)if(n=e+(r=u[p]),a.isDir(n)&&this.loadPath(t,n),a.isFile(n)&&a.checkFileType(r,".js")&&(c=this.loadFile(n))){var f=a.getFileName(r,".js".length);if(c.id)f=c.id;else if(c.mid)f=c.mid+s.BEAN_SPECIAL_MODEL;else{if(!c.cid)continue;f=c.cid+s.BEAN_SPECIAL_CONSTRAINT}var h=t[f];t[f]=i.mergeMeta(c,h)}return t}}).call(this,t("_process"))},{"../util/constant":36,"../util/fileUtil":37,"../util/metaUtil":38,"../util/utils":43,_process:49,path:48,"pomelo-logger":56}],32:[function(t,e,n){t("pomelo-logger").getLogger("bearcat","PropertiesLoader");var r=t("../util/fileUtil"),o=t("../util/utils"),i=function(){};e.exports=i,i.prototype.loadProperties=function(t,e){var n={};return this.loadDir(n,t),this.loadDir(n,t+"/"+e),n},i.prototype.loadDir=function(t,e){if(r.existsSync(e)&&o.isDir(e)){var n,i,s=r.readdirSync(e);"/"!==e.charAt(e.length-1)&&(e+="/");for(var a=0,c=s.length;a<c;a++)if(n=e+s[a],!o.isDir(n)&&o.isFile(n)&&o.checkFileType(n,"json")&&(i=o.myRequire(n),o.isNotNull(i)&&o.checkObject(i)))for(var u in i)o.isNotNull(i[u])&&(t[u]=i[u])}}},{"../util/fileUtil":37,"../util/utils":43,"pomelo-logger":56}],33:[function(t,e,n){var r=t("./configLoader"),o=function(){this.loadPathMap={},this.loadPaths=[]};e.exports=o,o.prototype.getConfigLoader=function(){return new r},o.prototype.addLoadPath=function(t){this.loadPaths.push(t)},o.prototype.load=function(t){if(this.loadPathMap[t])return this.loadPathMap[t];var e=this.getConfigLoader().getResources(t);return this.loadPathMap[t]=e,this.addLoadPath(t),e}},{"./configLoader":30}],34:[function(t,e,n){var r=t("../aop/advisor"),o=t("../aop/aspect"),i=t("./utils"),s={buildAspect:function(t,e){var n=new o,i=e.getBeanName();n.setBeanDefinition(e),n.setBeanName(i);for(var s=0;s<t.length;s++){var a=t[s],c=a.pointcut,u=a.advice,p=a.order,l=a.runtime||!1;if(c&&u){var f=new r;f.setPointcut(c),f.setAdvice(u),f.setBeanName(i),f.setOrder(p),f.setRuntime(l),f.parse(),n.addAdvisor(f)}}return n},getMethodsFromObject:function(t){var e=t,n=[];for(var r in e){var o=e[r];i.checkFunction(o)&&n.push(r)}return n},sortAdvisorsByOrder:function(t){return t.sort(i.compareByOrder),t}};e.exports=s},{"../aop/advisor":2,"../aop/aspect":3,"./utils":43}],35:[function(t,e,n){var r=t("../beans/support/beanWrapper"),o=t("./utils"),i={buildBeanWrapper:function(t){var e=[];if(!o.checkArray(t))return e;for(var n=0;n<t.length;n++){var i=t[n],s=new r;i.name&&s.setName(i.name),i.type&&s.setType(i.type),i.value&&s.setValue(i.value),i.ref&&s.setRef(i.ref),s.setRole(),e.push(s)}return e},getBeanSettingsMap:function(t){var e={};if(!o.checkArray(t))return e;for(var n=0;n<t.length;n++){var r=t[n],i=r.getName();i&&(e[i]=r)}return e},getBeanSettingsArray:function(t){var e=[];if(!o.isNotNull(t))return e;for(var n in t)e.push(t[n]);return e},sortBeanDefinitions:function(t,e){var n=[];for(var r in t){var i=t[r];!i.isSingleton()||i.isLazyInit()||i.isAbstract()||(i.hasParentBean()&&(i=e.setParentBean(i.getBeanName())),n.push(i))}return n.sort(o.compareBeans),n}};e.exports=i},{"../beans/support/beanWrapper":16,"./utils":43}],36:[function(t,e,n){e.exports={SCOPE_DEFAULT:"singleton",SCOPE_SINGLETON:"singleton",SCOPE_PROTOTYPE:"prototype",DEPENDS_ARGS:"args",DEPENDS_PROPS:"props",SETTINGS_ARGS_ON:"argsOn",SETTINGS_PROPS_ON:"propsOn",SETTINGS_FACTORY_ARGS_ON:"factoryArgsOn",DEPEND_TYPE_BEAN:"d_bean",DEPEND_TYPE_VALUE:"d_value",DEPEND_TYPE_VAR:"d_var",DEPEND_TYPE_ERROR:"d_error",PROPS_DEFAULT:[],ARGS_DEFAULT:[],ASYNC_INIT_DEFAULT:!1,LAZY_INIT_DEFAULT:!1,ABSTRACT_DEFAULT:!1,INIT_CB_DEFAULT:function(){},AOP_ADVICE_BEFORE:"before",AOP_ADVICE_AFTER:"after",AOP_ADVICE_AROUND:"around",PROXY_DEFAULT:!0,DEFAULT_ENV:"dev",LOGPATH:"log4js.json",NAMESPACE_SEPERATOR:":",FUNC_ARGS_REGEXP:/function.*?\((.*?)\)\s*\{/,FUNC_PROPS_REGEXP:/\s*this\.\$\w+\s*=(.|\s)*?;/g,FUNC_COMMENT_LINE:/\/\/.*?\n/g,FUNC_COMMENT_STAR:/\/\*(.|\s)*?\*\//g,FUNC_ANNOTATION:"$",PROTO_FUNC_PROPS_REGEXP:/\w+\s*\$\w+\s*=(.|\s)*?;/g,META_PROPS:["id","order","init","destroy","factoryBean","factoryMethod","scope","async","abstract","parent","lazy","factoryArgs","proxy","aop","mid","table","cid","constraint","prefix"],AOP_META_PROPS:["pointcut","advice","order","runtime"],META_AOP:"aop",META_ID:"id",META_AOP_ADVICE:"advice",FILTER_BUILTIN:"builtin",FILTER_MODEL:"model",FILTER_BUILTIN_METHOD:"filter",CONSTRAINT_ANNOTATION:"$",CONSTRAINT_SPLIT:";",CONSTRAINT_METHOD:"validate",MODEL_ATTRIBUTES:["type","primary","default","ref","prefix"],MODEL_ATTRIBUTE_PRIMARY:"primary",MODEL_ATTRIBUTE_BALANCE:"balance",MODEL_ATTRIBUTE_TYPE_ARRAY:"Array",MODEL_ATTRIBUTE_TYPE_OBJECT:"Object",MODEL_FILTER_BEFORE:"before",MODEL_FILTER_AFTER:"after",BEAN_SPECIAL_MODEL:"_$model",BEAN_SPECIAL_CONSTRAINT:"_$constraint",TYPE_NUMBER:"Number",DEFINE_GETTER_PREFIX:"__"}},{}],37:[function(t,e,n){var r=t("fs"),o={existsSync:function(){return!1},watch:function(){},realpathSync:function(){},readdirSync:function(){}};if(r)for(var i in r)o[i]=r[i];e.exports=o},{fs:45}],38:[function(require,module,exports){(function(process){var logger=require("pomelo-logger").getLogger("Bearcat","MetaUtil"),RequireUtil=require("./requireUtil"),Constant=require("./constant"),Os=RequireUtil.requireOs(),Utils=require("./utils"),EOL=Os.EOL,MetaUtil={metaCache:{},mergeMeta:function(t,e){if(!e)return t;for(var n in t)e[n]=t[n];return e},resolveFuncAnnotation:function(t,e,n){var r=t.toString();if("on"===process.env.LOADER_BIN&&(n=!0),this.metaCache[r]&&!n)return this.metaCache[r];var o=r.match(Constant.FUNC_ARGS_REGEXP),i=[];(o=o?o[1]:"")&&(i=o.split(","));var s={},a=[],c=[],u=[],p=null;if(i.length||process.env.BEARCAT_FUNCTION_STRING)r=MetaUtil.resolveFuncComment(r),p=MetaUtil.resolvePropsFromFuncString(r,o);else try{p=new t}catch(t){return}for(var l in p)if(p.hasOwnProperty(l)||MetaUtil.checkFuncAnnotation(l)){var f=p[l];if(!Utils.checkFunction(f))if(MetaUtil.checkFuncAnnotation(l)){var h=l.substr(1);if(MetaUtil.checkInMetaProps(l))if(h===Constant.META_AOP&&!0===p[l])s[h]=this.resolvePrototypeAnnotation(t);else{if(h===Constant.META_ID&&MetaUtil.checkInMetaProps(f,!0))return void logger.warn("bean id value must not use bearcat special bean attributes: %s",f);s[h]=f}else MetaUtil.checkInFuncArgs(l,i)||(MetaUtil.checkFuncPropsValue(l)?a.push({name:l,value:f}):MetaUtil.checkFuncPropsType(l)?a.push({name:l,type:f}):MetaUtil.checkFuncPropsNamespace(l)?a.push({name:l,ref:f}):a.push({name:l,ref:h}))}else MetaUtil.checkFuncPropsConfigValue(f)?a.push({name:l,value:f}):MetaUtil.checkFuncValueAnnotation(f)&&u.push({name:l,value:f})}delete p,a.length&&(s.props=a);for(var y=0;y<i.length;y++){var g=i[y].trim();if(g){h=g.substr(1);MetaUtil.checkFuncAnnotation(g)?c.push({name:g,ref:h}):c.push({name:g,type:"Object"})}}c.length&&(s.args=c),u.length&&(s.attributes=u),s.func=t,e&&(s.fpath=require("path").resolve(process.cwd(),e));var d=s.id;return s.id?d=s.id:s.mid?d=s.mid+Constant.BEAN_SPECIAL_MODEL:s.cid&&(d=s.cid+Constant.BEAN_SPECIAL_CONSTRAINT),d&&(s.id=d),this.metaCache[r]=s,s},resolveMetaAnnotation:function(t,e,n){if(t&&t.id&&t.func&&"function"==typeof t.func){var r=MetaUtil.resolveFuncAnnotation(t.func,e,n);for(var o in t)if("func"!==o)if(-1===["args","props","factoryArgs"].indexOf(o))r[o]=t[o];else{if(!t[o])continue;r[o]||(r[o]=[]),MetaUtil.overrideArray(t[o],r[o])}return r}},overrideArray:function(t,e){for(var n=0;n<t.length;n++){for(var r=t[n],o=0;o<e.length;o++){var i=e[o];if(r.name===i.name){e.splice(o,1,r);break}}-1===e.indexOf(r)&&e.push(r)}},resolvePropsFromFuncString:function(t,e){var n=t.match(Constant.FUNC_PROPS_REGEXP);if(n&&Utils.checkArray(n)){for(var r="var FuncProps = function("+e+") {"+EOL,o=0;o<n.length;o++)r+=n[o]+EOL;r+="}"}return MetaUtil.getEvalFuncProps(r)},resolvePrototypeAnnotation:function(t){var e=t.prototype,n=[];for(var r in e){var o=e[r];if(Utils.checkFunction(o)){var i=o.toString(),s=(i=MetaUtil.resolveFuncComment(i)).match(Constant.PROTO_FUNC_PROPS_REGEXP),a="";if(s&&Utils.checkArray(s)){a="var FuncMetaProps = function() {"+EOL;for(var c=0;c<s.length;c++)a+=s[c].replace(/var|let|const\s*/,"this.")+EOL;a+="}"}var u=MetaUtil.getEvalFuncMetaProps(a),p={},l=!1;for(var f in p[Constant.META_AOP_ADVICE]=r,u)if(this.checkInAOPMetaProps(f)){var h=f.substr(1),y=u[f];p[h]=y,l=!0}l&&n.push(p)}}return n},resolveFuncComment:function(t){return t=(t=t.replace(Constant.FUNC_COMMENT_LINE,"")).replace(Constant.FUNC_COMMENT_STAR,"")},getEvalFuncProps:function(t){if(!t)return{};try{return eval(t),new FuncProps}catch(t){return logger.error("resolveFuncAnnotation error: "+t.stack),{}}},getEvalFuncMetaProps:function(t){if(!t)return{};try{return eval(t),new FuncMetaProps}catch(t){return logger.error("resolvePrototypeAnnotation error: "+t.stack),{}}},checkInMetaProps:function(t,e){var n=Constant.META_PROPS,r="";e||(r=Constant.FUNC_ANNOTATION);for(var o=0;o<n.length;o++)if(r+n[o]===t)return!0;return!1},checkInAOPMetaProps:function(t){for(var e=Constant.AOP_META_PROPS,n=0;n<e.length;n++)if(Constant.FUNC_ANNOTATION+e[n]===t)return!0;return!1},checkInFuncArgs:function(t,e){for(var n=0;n<e.length;n++)if(t===e[n])return!0;return!1},checkFuncAnnotation:function(t){return t.match(/^\$/)},checkFuncValueAnnotation:function(t){return!!Utils.checkString(t)&&this.checkFuncAnnotation(t)},checkFuncPropsValue:function(t){return t.match(/^\$V/)},checkFuncPropsType:function(t){return t.match(/^\$T/)},checkFuncPropsNamespace:function(t){return t.match(/^\$N/)},checkFuncPropsConfigValue:function(t){if(Utils.checkString(t))return t.match(/^\$\{.*?\}$/)},cleanUp:function(){this.metaCache={}}};module.exports=MetaUtil}).call(this,require("_process"))},{"./constant":36,"./requireUtil":41,"./utils":43,_process:49,path:48,"pomelo-logger":56}],39:[function(t,e,n){var r=t("../model/modelAttribute"),o=(t("./constant"),t("./utils")),i={buildModelAttribute:function(t,e){if(!o.checkArray(t))return{};for(var n={},i=[],s=!1,a="",c=0;c<t.length;c++){var u=t[c],p=u.name,l=u.value,f=new r;f.setName(p),f.setExpression(l),f.parse(l,e),n[p]=f,f.getRef()&&i.push(p);var h=f.getType();o.checkTypeArray(h)&&(s=!0),f.isBalance()&&(a=p)}return{fields:n,balance:a,refFields:i,oneToMany:s}}};e.exports=i},{"../model/modelAttribute":22,"./constant":36,"./utils":43}],40:[function(t,e,n){var r=t("./utils"),o={};o.request=function(t,e,n,o){return r.checkWebWorker()?this.requestFromWebWorker(t,e,n,o):this.requestFromAsyncScript(t,e,n,o)},o.requestFromWebWorker=function(t,e,n,r){var o;try{importScripts(t)}catch(t){o=t}e(o)},o.requestFromAsyncScript=function(t,e,n,o){var i=document,s=i.head||i.getElementsByTagName("head")[0]||i.documentElement,a=s.getElementsByTagName("base")[0],c=i.createElement("script");if(n){var u=r.checkFunction(n)?n(t):n;u&&(c.charset=u)}var p=r.checkFunction(o)?o(t):o;!1!==p&&(c.crossorigin=p),this.addOnload(s,c,e,t),c.async=!0,c.src=t,c,a?s.insertBefore(c,a):s.appendChild(c),null},o.addOnload=function(t,e,n,r){function o(r){e.onload=e.onerror=e.onreadystatechange=null,t.removeChild(e),e=null,n(r)}"onload"in e?(e.onload=o,e.onerror=function(){o(!0)}):e.onreadystatechange=function(){/loaded|complete/.test(e.readyState)&&o()}},e.exports=o},{"./utils":43}],41:[function(t,e,n){var r,o=t("../../shim/builtins"),i={};!function(){r=this}(),r.process||(r.process=o.process),i.requireOs=function(){var e=t("os");return e||o.os},i.requirePath=function(){var e=t("path");return e||o.path},i.requireUtil=function(){var e=t("util");return e||o.util},e.exports=i},{"../../shim/builtins":54,os:47,path:48,util:52}],42:[function(t,e,n){var r={},o=/[^?#]*\//;r.getLoaderDir=function(){function t(t){return t.match(o)[0]}"undefined"==typeof location&&(location={});var e,n,r="undefined"==typeof window&&"undefined"!=typeof importScripts&&isFunction(importScripts),i=!location.href||/^(about|blob):/.test(location.href)?"":t(location.href);if(r){var s,a;try{throw new Error}catch(t){s=t.stack.split("\n")}s.shift();for(var c=/.*?((?:http|https|file)(?::\/{2}[\w]+)(?:[\/|\.]?)(?:[^\s"]*)).*?/i;s.length>0;){var u=s.shift();if(null!=(a=c.exec(u)))break}if(null!=a)var p=/(.*?):\d+:\d+\)?$/.exec(a[1])[1];p,e=t(p||i),""===i&&(i=e)}else{var l=document,f=l.scripts,h=l.getElementById("seajsnode")||f[f.length-1];e=t(((n=h).hasAttribute?n.src:n.getAttribute("src",4))||i)}return e},e.exports=r},{}],43:[function(t,e,n){var r=t("./requireUtil"),o=t("./constant"),i=t("./fileUtil"),s=r.requirePath(),a={normalizeType:function(t){if(a.checkString(t))return(t=t.toLowerCase())[0].toUpperCase()+t.substr(1)},checkTypeArray:function(t){return(t=this.normalizeType(t))===o.MODEL_ATTRIBUTE_TYPE_ARRAY},checkTypeObject:function(t){return(t=this.normalizeType(t))===o.MODEL_ATTRIBUTE_TYPE_OBJECT},isType:function(t){return function(e){return{}.toString.call(e)=="[object "+t+"]"}}};a.checkArray=Array.isArray||a.isType("Array"),a.checkNumber=a.isType("Number"),a.checkFunction=a.isType("Function"),a.checkObject=a.isType("Object"),a.checkString=a.isType("String"),a.checkBoolean=a.isType("Boolean"),a.checkObjectEmpty=function(t){var e=!0;for(var n in t)e=!1;return e},a.checkType=function(t){return"Object"===t||("Number"===t||("Array"===t||("Boolean"===t||("Function"===t||"String"===t))))},a.isNotNull=function(t){return null!=t},a.myRequire=function(e){if(a.checkString(e)){var n=null;try{return n=t(e)}catch(t){return console.log(t.stack),n}}},a.myRequireHot=function(t){var e=null;try{return e=a.requireUncached(t)}catch(t){return console.log(t.stack),e}},a.getLoadPath=function(e,n){return a.checkString(e)?(e=e.replace(/\./g,"/"),n=t.resolve(n),s.dirname(n)+"/"+e):null},a.getLoadPath2=function(e,n){if(!a.checkString(e))return null;n=t.resolve(n);var r=s.dirname(n);return s.resolve(r,e)},a.requireUncached=function(e){if(a.checkString(e)){var n=t.resolve(e);return t.cache[n]&&delete t.cache[n],t(n)}},a.checkFileType=function(t,e){return"."!==e.charAt(0)&&(e="."+e),!(t.length<=e.length)&&t.substring(t.length-e.length).toLowerCase()===(e=e.toLowerCase())},a.isFile=function(t){if(i.existsSync(t))return i.statSync(t).isFile()},a.isDir=function(t){if(i.existsSync(t))return i.statSync(t).isDirectory()},a.getFileName=function(t,e){var n=s.basename(t);return n.length>e?n.substring(0,n.length-e):n},a.compareByOrder=function(t,e){return t.getOrder()?e.getOrder()?t.getOrder()-e.getOrder():-1:1},a.compareBeans=function(t,e){return t.isAspect()?-1:e.isAspect()?1:t.getOrder()?e.getOrder()?t.getOrder()-e.getOrder():-1:1},a.parseArgs=function(t){var e={};e.main=t[1];for(var n=2;n<t.length;n++){var r=t[n],o=r.indexOf("="),i=r.slice(0,o),s=r.slice(o+1);e[i]=s}return e},a.checkBrowser=function(){return"undefined"!=typeof window},a.checkWebWorker=function(){return this.checkBrowser()&&"undefined"!=typeof importScripts&&this.checkFunction(importScripts)},a.checkModelFilterError=function(t){return!0!==t&&this.isNotNull(t)},a.checkCocos2dJsb=function(){return!!("undefined"!=typeof cc&&cc&&cc.sys&&cc.sys.isNative)},e.exports=a},{"./constant":36,"./fileUtil":37,"./requireUtil":41}],44:[function(t,e,n){var r=t("./constant"),o=t("./utils"),i={metaValidator:function(t){var e=t.id,n=t.mid,i=t.cid;if(!e&&!n&&!i)return new Error("one of id, mid, cid must be exist");if(o.isNotNull(e)&&!o.checkString(e))return new Error("id must be String");if(o.isNotNull(n)&&!o.checkString(n))return new Error("mid must be String");if(o.isNotNull(i)&&!o.checkString(i))return new Error("cid must be String");var s=t.func;if(!o.isNotNull(s)||!o.checkFunction(s))return new Error("func must be Function");var a=t.table;if(o.isNotNull(a)&&!o.checkString(a))return new Error("table must be String");var c=t.message;if(o.isNotNull(c)&&!o.checkString(c))return new Error("message must be String");var u=t.constraint;if(o.isNotNull(u)&&!o.checkString(u))return new Error("constraint must be String");var p=t.order;if(o.isNotNull(p)&&!o.checkNumber(p))return new Error("order must be Number");var l=t.parent;if(o.isNotNull(l)&&!o.checkString(l))return new Error("parent must be String");var f=t.init;if(o.isNotNull(f)&&!o.checkString(f))return new Error("init must be String");var h=t.destroy;if(o.isNotNull(h)&&!o.checkString(h))return new Error("destroy must be String");var y=t.factoryBean;if(o.isNotNull(y)&&!o.checkString(y))return new Error("factoryBean must be String");var g=t.factoryMethod;if(o.isNotNull(g)&&!o.checkString(g))return new Error("factoryMethodName must be String");var d=t.scope||r.SCOPE_DEFAULT;if(d&&d!==r.SCOPE_SINGLETON&&d!==r.SCOPE_PROTOTYPE)return new Error("scope must be singleton or prototype");var v=t.async||r.ASYNC_INIT_DEFAULT;if(o.isNotNull(v)&&!o.checkBoolean(v))return new Error("async must be Boolean");var m=t.lazy||r.LAZY_INIT_DEFAULT;return!(o.isNotNull(m)&&!o.checkBoolean(m))||new Error("lazy must be Boolean")}};e.exports=i},{"./constant":36,"./utils":43}],45:[function(t,e,n){},{}],46:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,a,c,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var p=new Error('Uncaught, unspecified "error" event. ('+e+")");throw p.context=e,p}if(s(n=this._events[t]))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),r=(u=n.slice()).length,c=0;c<r;c++)u[c].apply(this,a);return!0},r.prototype.on=r.prototype.addListener=function(t,e){var n;if(!o(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,o(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.once=function(t,e){if(!o(e))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var n,r,s,a;if(!o(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=(n=this._events[t]).length,r=-1,n===e||o(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(o(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?o(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(o(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],47:[function(t,e,n){n.endianness=function(){return"LE"},n.hostname=function(){return"undefined"!=typeof location?location.hostname:""},n.loadavg=function(){return[]},n.uptime=function(){return 0},n.freemem=function(){return Number.MAX_VALUE},n.totalmem=function(){return Number.MAX_VALUE},n.cpus=function(){return[]},n.type=function(){return"Browser"},n.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},n.networkInterfaces=n.getNetworkInterfaces=function(){return{}},n.arch=function(){return"javascript"},n.platform=function(){return"browser"},n.tmpdir=n.tmpDir=function(){return"/tmp"},n.EOL="\n",n.homedir=function(){return"/"}},{}],48:[function(t,e,n){(function(t){function e(t,e){for(var n=0,r=t.length-1;r>=0;r--){var o=t[r];"."===o?t.splice(r,1):".."===o?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return r.exec(t).slice(1)};function i(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}n.resolve=function(){for(var n="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(n=s+"/"+n,r="/"===s.charAt(0))}return(r?"/":"")+(n=e(i(n.split("/"),function(t){return!!t}),!r).join("/"))||"."},n.normalize=function(t){var r=n.isAbsolute(t),o="/"===s(t,-1);return(t=e(i(t.split("/"),function(t){return!!t}),!r).join("/"))||r||(t="."),t&&o&&(t+="/"),(r?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(i(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var o=r(t.split("/")),i=r(e.split("/")),s=Math.min(o.length,i.length),a=s,c=0;c<s;c++)if(o[c]!==i[c]){a=c;break}var u=[];for(c=a;c<o.length;c++)u.push("..");return(u=u.concat(i.slice(a))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var e=o(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return o(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,t("_process"))},{_process:49}],49:[function(t,e,n){var r,o,i=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(t){o=a}}();var u,p=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?p=u.concat(p):f=-1,p.length&&y())}function y(){if(!l){var t=c(h);l=!0;for(var e=p.length;e;){for(u=p,p=[];++f<e;)u&&u[f].run();f=-1,e=p.length}u=null,l=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function d(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new g(t,e)),1!==p.length||l||c(y)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=d,i.addListener=d,i.once=d,i.off=d,i.removeListener=d,i.removeAllListeners=d,i.emit=d,i.prependListener=d,i.prependOnceListener=d,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],50:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],51:[function(t,e,n){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],52:[function(t,e,n){(function(e,r){var o=/%[sdj%]/g;n.format=function(t){if(!v(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(a(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(t).replace(o,function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),c=r[n];n<i;c=r[++n])g(c)||!A(c)?s+=" "+c:s+=" "+a(c);return s},n.deprecate=function(t,o){if(m(r.process))return function(){return n.deprecate(t,o).apply(this,arguments)};if(!0===e.noDeprecation)return t;var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(o);e.traceDeprecation?console.trace(o):console.error(o),i=!0}return t.apply(this,arguments)}};var i,s={};function a(t,e){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),y(e)?r.showHidden=e:e&&n._extend(r,e),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),p(r,t,r.depth)}function c(t,e){var n=a.styles[e];return n?"["+a.colors[n][0]+"m"+t+"["+a.colors[n][1]+"m":t}function u(t,e){return t}function p(t,e,r){if(t.customInspect&&e&&_(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var o=e.inspect(r,t);return v(o)||(o=p(t,o,r)),o}var i=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(v(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(d(e))return t.stylize(""+e,"number");if(y(e))return t.stylize(""+e,"boolean");if(g(e))return t.stylize("null","null")}(t,e);if(i)return i;var s,a=Object.keys(e),c=(s={},a.forEach(function(t,e){s[t]=!0}),s);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),B(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(e);if(0===a.length){if(_(e)){var u=e.name?": "+e.name:"";return t.stylize("[Function"+u+"]","special")}if(b(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(E(e))return t.stylize(Date.prototype.toString.call(e),"date");if(B(e))return l(e)}var A,F="",N=!1,T=["{","}"];(h(e)&&(N=!0,T=["[","]"]),_(e))&&(F=" [Function"+(e.name?": "+e.name:"")+"]");return b(e)&&(F=" "+RegExp.prototype.toString.call(e)),E(e)&&(F=" "+Date.prototype.toUTCString.call(e)),B(e)&&(F=" "+l(e)),0!==a.length||N&&0!=e.length?r<0?b(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),A=N?function(t,e,n,r,o){for(var i=[],s=0,a=e.length;s<a;++s)P(e,String(s))?i.push(f(t,e,n,r,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(f(t,e,n,r,o,!0))}),i}(t,e,r,c,a):a.map(function(n){return f(t,e,r,c,n,N)}),t.seen.pop(),function(t,e,n){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(A,F,T)):T[0]+F+T[1]}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,r,o,i){var s,a,c;if((c=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),P(r,o)||(s="["+o+"]"),a||(t.seen.indexOf(c.value)<0?(a=g(n)?p(t,c.value,null):p(t,c.value,n-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),m(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function h(t){return Array.isArray(t)}function y(t){return"boolean"==typeof t}function g(t){return null===t}function d(t){return"number"==typeof t}function v(t){return"string"==typeof t}function m(t){return void 0===t}function b(t){return A(t)&&"[object RegExp]"===F(t)}function A(t){return"object"==typeof t&&null!==t}function E(t){return A(t)&&"[object Date]"===F(t)}function B(t){return A(t)&&("[object Error]"===F(t)||t instanceof Error)}function _(t){return"function"==typeof t}function F(t){return Object.prototype.toString.call(t)}function N(t){return t<10?"0"+t.toString(10):t.toString(10)}n.debuglog=function(t){if(m(i)&&(i=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!s[t])if(new RegExp("\\b"+t+"\\b","i").test(i)){var r=e.pid;s[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,e)}}else s[t]=function(){};return s[t]},n.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=y,n.isNull=g,n.isNullOrUndefined=function(t){return null==t},n.isNumber=d,n.isString=v,n.isSymbol=function(t){return"symbol"==typeof t},n.isUndefined=m,n.isRegExp=b,n.isObject=A,n.isDate=E,n.isError=B,n.isFunction=_,n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},n.isBuffer=t("./support/isBuffer");var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}n.log=function(){var t,e;console.log("%s - %s",(t=new Date,e=[N(t.getHours()),N(t.getMinutes()),N(t.getSeconds())].join(":"),[t.getDate(),T[t.getMonth()],e].join(" ")),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!A(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":51,_process:49,inherits:50}],53:[function(t,e,n){e.exports={name:"bearcatjs",version:"1.0.7",description:"Magic, self-described javaScript objects build up elastic, maintainable front-backend javaScript applications",main:"index.js",scripts:{test:"grunt",browser:"grunt browser_test",build:"grunt package"},repository:{type:"git",url:"https://github.com/justinchou/bearcatjs.git"},keywords:["di","IoC","AOP","dependency","injection","consistent","configuration","hot reload","front-backend","sharable codes","dependency injection","asynchronous script loading","magic, self-described javaScript objects"],dependencies:{chokidar:"^2.0.2",commander:"^2.14.1","pomelo-logger":"^0.1.7"},browser:{"pomelo-logger":"./shim/logger.js",chokidar:"./shim/chokidar.js"},author:"fantasyni",license:"MIT",devDependencies:{blanket:"^1.2.3","expect.js":"^0.3.1",grunt:"^1.0.2","grunt-browserify":"^5.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-uglify":"^3.3.0","grunt-mocha-istanbul":"^5.0.2","grunt-mocha-test":"^0.13.3",istanbul:"^0.4.5",mocha:"^5.0.1"}}},{}],54:[function(t,e,n){n.process=t("./modules/process"),n.path=t("./modules/path"),n.util=t("./modules/util"),n.os=t("./modules/os"),t("./object")},{"./modules/os":57,"./modules/path":58,"./modules/process":59,"./modules/util":62,"./object":63}],55:[function(t,e,n){var r={watch:function(){}};e.exports=r},{}],56:[function(t,e,n){(function(n){var r=t("../lib/util/utils");e.exports={getLogger:function(t){if("function"!=typeof console.log)return console;for(var e=arguments,o="",i=1;i<e.length;i++)i!==e.length-1?o=o+e[i]+"] [":o+=e[i];"string"==typeof t&&(t=t.replace(n.cwd(),""));var s=["log","debug","info","warn","error","trace"],a={};if(r.checkCocos2dJsb())for(i=0;i<s.length;i++){var c=s[i];cc[c]?a[c]=cc[c]:a[c]=cc.log}else a=console;var u={};for(var p in a)u[p]=a[p];for(i=0;i<s.length;i++)!function(t){u[t]=function(){var r="";n.env.RAW_MESSAGE||(e.length>1&&(r="["+o+"] "),e.length&&n.env.LOGGER_LINE&&(r=getLine()+": "+r)),e.length&&(arguments[0]=r+arguments[0]),a[t].apply(a,arguments)}}(s[i]);return u}}}).call(this,t("_process"))},{"../lib/util/utils":43,_process:49}],57:[function(t,e,n){n.endianness=function(){return"LE"},n.hostname=function(){return"undefined"!=typeof location?location.hostname:""},n.loadavg=function(){return[]},n.uptime=function(){return 0},n.freemem=function(){return Number.MAX_VALUE},n.totalmem=function(){return Number.MAX_VALUE},n.cpus=function(){return[]},n.type=function(){return"Browser"},n.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},n.networkInterfaces=n.getNetworkInterfaces=function(){return{}},n.arch=function(){return"javascript"},n.platform=function(){return"browser"},n.tmpdir=n.tmpDir=function(){return"/tmp"},n.EOL="\n"},{}],58:[function(t,e,n){(function(t){function e(t,e){for(var n=0,r=t.length-1;r>=0;r--){var o=t[r];"."===o?t.splice(r,1):".."===o?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return r.exec(t).slice(1)};function i(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}n.resolve=function(){for(var n="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(n=s+"/"+n,r="/"===s.charAt(0))}return(r?"/":"")+(n=e(i(n.split("/"),function(t){return!!t}),!r).join("/"))||"."},n.normalize=function(t){var r=n.isAbsolute(t),o="/"===s(t,-1);return(t=e(i(t.split("/"),function(t){return!!t}),!r).join("/"))||r||(t="."),t&&o&&(t+="/"),(r?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(i(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var o=r(t.split("/")),i=r(e.split("/")),s=Math.min(o.length,i.length),a=s,c=0;c<s;c++)if(o[c]!==i[c]){a=c;break}var u=[];for(c=a;c<o.length;c++)u.push("..");return(u=u.concat(i.slice(a))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var e=o(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return o(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,t("_process"))},{_process:49}],59:[function(t,e,n){var r=e.exports={};function o(){}r.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.MutationObserver,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};var r=[];if(e){var o=document.createElement("div");return new MutationObserver(function(){var t=r.slice();r.length=0,t.forEach(function(t){t()})}).observe(o,{attributes:!0}),function(t){r.length||o.setAttribute("yes","no"),r.push(t)}}return n?(window.addEventListener("message",function(t){var e=t.source;e!==window&&null!==e||"process-tick"!==t.data||(t.stopPropagation(),r.length>0&&r.shift()())},!0),function(t){r.push(t),window.postMessage("process-tick","*")}):function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=o,r.addListener=o,r.once=o,r.off=o,r.removeListener=o,r.removeAllListeners=o,r.emit=o,r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],60:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],61:[function(t,e,n){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],62:[function(t,e,n){(function(e,r){var o=/%[sdj%]/g;n.format=function(t){if(!v(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(a(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(t).replace(o,function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),c=r[n];n<i;c=r[++n])g(c)||!A(c)?s+=" "+c:s+=" "+a(c);return s},n.deprecate=function(t,o){if(m(r.process))return function(){return n.deprecate(t,o).apply(this,arguments)};if(!0===e.noDeprecation)return t;var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(o);e.traceDeprecation?console.trace(o):console.error(o),i=!0}return t.apply(this,arguments)}};var i,s={};function a(t,e){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),y(e)?r.showHidden=e:e&&n._extend(r,e),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),p(r,t,r.depth)}function c(t,e){var n=a.styles[e];return n?"["+a.colors[n][0]+"m"+t+"["+a.colors[n][1]+"m":t}function u(t,e){return t}function p(t,e,r){if(t.customInspect&&e&&_(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var o=e.inspect(r,t);return v(o)||(o=p(t,o,r)),o}var i=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(v(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(d(e))return t.stylize(""+e,"number");if(y(e))return t.stylize(""+e,"boolean");if(g(e))return t.stylize("null","null")}(t,e);if(i)return i;var s,a=Object.keys(e),c=(s={},a.forEach(function(t,e){s[t]=!0}),s);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),B(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(e);if(0===a.length){if(_(e)){var u=e.name?": "+e.name:"";return t.stylize("[Function"+u+"]","special")}if(b(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(E(e))return t.stylize(Date.prototype.toString.call(e),"date");if(B(e))return l(e)}var A,F="",N=!1,T=["{","}"];(h(e)&&(N=!0,T=["[","]"]),_(e))&&(F=" [Function"+(e.name?": "+e.name:"")+"]");return b(e)&&(F=" "+RegExp.prototype.toString.call(e)),E(e)&&(F=" "+Date.prototype.toUTCString.call(e)),B(e)&&(F=" "+l(e)),0!==a.length||N&&0!=e.length?r<0?b(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),A=N?function(t,e,n,r,o){for(var i=[],s=0,a=e.length;s<a;++s)P(e,String(s))?i.push(f(t,e,n,r,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(f(t,e,n,r,o,!0))}),i}(t,e,r,c,a):a.map(function(n){return f(t,e,r,c,n,N)}),t.seen.pop(),function(t,e,n){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(A,F,T)):T[0]+F+T[1]}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,r,o,i){var s,a,c;if((c=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),P(r,o)||(s="["+o+"]"),a||(t.seen.indexOf(c.value)<0?(a=g(n)?p(t,c.value,null):p(t,c.value,n-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),m(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function h(t){return Array.isArray(t)}function y(t){return"boolean"==typeof t}function g(t){return null===t}function d(t){return"number"==typeof t}function v(t){return"string"==typeof t}function m(t){return void 0===t}function b(t){return A(t)&&"[object RegExp]"===F(t)}function A(t){return"object"==typeof t&&null!==t}function E(t){return A(t)&&"[object Date]"===F(t)}function B(t){return A(t)&&("[object Error]"===F(t)||t instanceof Error)}function _(t){return"function"==typeof t}function F(t){return Object.prototype.toString.call(t)}function N(t){return t<10?"0"+t.toString(10):t.toString(10)}n.debuglog=function(t){if(m(i)&&(i=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!s[t])if(new RegExp("\\b"+t+"\\b","i").test(i)){var r=e.pid;s[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,e)}}else s[t]=function(){};return s[t]},n.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=y,n.isNull=g,n.isNullOrUndefined=function(t){return null==t},n.isNumber=d,n.isString=v,n.isSymbol=function(t){return"symbol"==typeof t},n.isUndefined=m,n.isRegExp=b,n.isObject=A,n.isDate=E,n.isError=B,n.isFunction=_,n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},n.isBuffer=t("./support/isBuffer");var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}n.log=function(){var t,e;console.log("%s - %s",(t=new Date,e=[N(t.getHours()),N(t.getMinutes()),N(t.getSeconds())].join(":"),[t.getDate(),T[t.getMonth()],e].join(" ")),n.format.apply(n,arguments))},n.inherits=t("./support/inherits"),n._extend=function(t,e){if(!e||!A(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/inherits":60,"./support/isBuffer":61,_process:49}],63:[function(t,e,n){var r,o;"function"!=typeof Object.create&&(Object.create=(r=function(){},function(t){if(arguments.length,"object"!=typeof t)throw TypeError("Argument must be an object");r.prototype=t;var e=new r;return r.prototype=null,e})),"function"!=typeof String.prototype.trim&&(String.prototype.trim||(o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,String.prototype.trim=function(){return this.replace(o,"")}))},{}]},{},[1])(1)});